<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script type="text/javascript">function start(){alert("AstroJS Is Ready!  Release 3.022 by Salvatore Ruiu ( www.suchelu.it )")}function fuso_loc(){return new Date().getTimezoneOffset()/60}function hh_loc($,s){var _=0,d=0,o=$,n=jd_data(s),i=calcola_jddata(1,3,n[2],0,0,0)-1,t=calcola_jddata(1,10,n[2],0,0,0)-1;for(a=1;a<32;a++)i+=1,0==(giorno=jd_data(i))[5]&&(_=i),t+=1,0==(giorno=jd_data(t))[5]&&(d=t);return s>=_&&s<d&&(o+=1),o}function calcola_data($){var s=".",_=["Domenica","Luned&#236","Marted&#236","Mercoled&#236","Gioved&#236","Venerd&#236","Sabato"],d=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],t=["Janvier","F&#233vrier","Mars","Avril","Mai","Juin","Juillet","Ao&#251t","Septembre","Octobre","Novembre","D&#233cembre"],e=["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],R=["Januar","Februar","M&#228rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],r=["Dom&#236niga","Lunis","Martis","M&#232;rcuris","Gi&#242;bia","Chen&#224;bura","S&#224;badu"],c=["Ghenn&#224rgiu","Fre&#224rgiu","Martzu","Abrile","Maju","L&#224mpadas","Tr&#236ulas","Austu","Cabudanni","Santugaine","Santandria","Nadale"],l=["Domingo","Lunes","Martes","Mi&#233;rcoles","Jueves","Viernes","S&#225;bado"],u=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],g=["Domingo","Segunda-feira","Ter&#231;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S&#225;bado"],v=["Janeiro","Fevereiro","Mar&#231;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],f=["Dimanco","Lundo","Mardo","Merkredo","Ja&#249;do","Vendredo","Sabato"],p=["Januaro","Februaro","Marto","Aprilo","Majo","Junio","Julio","A&#249;gusto","Septembro","Oktobro","Novembro","Decembro"],w=new Date,m=w.getYear(),S=w.getMonth(),T=w.getDate(),h=w.getDay(),D=w.getHours(),L=w.getMinutes(),j=w.getSeconds();return m<1900&&(m+=1900),D<10&&(D="0"+D),L<10&&(L="0"+L),j<10&&(j="0"+j),s="ING"==$?D+":"+L+":"+j+"   "+o[h]+", "+T+" "+n[S]+" "+m:"FRA"==$?D+":"+L+":"+j+"   "+i[h]+", "+T+" "+t[S]+" "+m:"TED"==$?D+":"+L+":"+j+"   "+e[h]+", "+T+" "+R[S]+" "+m:"SAR"==$?D+":"+L+":"+j+"   "+r[h]+", "+T+" "+c[S]+" "+m:"SPA"==$?D+":"+L+":"+j+"   "+l[h]+", "+T+" "+u[S]+" "+m:"POR"==$?D+":"+L+":"+j+"   "+g[h]+", "+T+" "+v[S]+" "+m:"ESP"==$?D+":"+L+":"+j+"   "+f[h]+", "+T+" "+p[S]+" "+m:D+":"+L+":"+j+"   "+_[h]+", "+T+" "+d[S]+" "+m}function calcola_datan($){var s=".",_=new Date,d=_.getYear(),o=_.getMonth(),n=_.getDate();_.getDay();var i=_.getHours(),t=_.getMinutes(),e=_.getSeconds();return d<1900&&(d+=1900),i<10&&(i="0"+i),t<10&&(t="0"+t),e<10&&(e="0"+e),o+=1,s="ING"==$?o+":"+n+":"+d+":"+i:n+":"+o+":"+d+":"+i}function calcola_datan2($){var s=".",_=new Date,d=_.getYear(),o=_.getMonth(),n=_.getDate();_.getDay();var i=_.getHours(),t=_.getMinutes(),e=_.getSeconds();return d<1900&&(d+=1900),i<10&&(i="0"+i),t<10&&(t="0"+t),e<10&&(e="0"+e),o+=1,s="ING"==$?o+":"+n+":"+d+":"+i+":"+t+":"+e:n+":"+o+":"+d+":"+i+":"+t+":"+e}function calcola_jd(){var $=new Date,s=$.getYear(),_=$.getMonth(),d=$.getDate(),o=$.getHours(),n=$.getMinutes(),i=$.getSeconds();_+=1,s<1900&&(s+=1900);var t=costanti_jd(d,_,s,o+=fuso_loc(),n,i);return 1*t}function costanti_jd(giorno,mese,anno,ora,minuti,secondi){var yy_negativo=0,mese_str=String(mese);anno<0&&(yy_negativo=1),(1==mese||2==mese)&&(mese_str="0"+mese_str,anno-=1,mese+=12);var verifica_yy=String(anno)+"."+mese_str+String(giorno),yy_num=eval(verifica_yy),a=parseInt(anno/100),b=2-a+parseInt(a/4);yy_num<1582.1015&&(a=0,b=0);var offsetGiornata,c=parseInt(365.25*anno),d=parseInt(30.6001*(mese+1)),dataGiuliana=b+c+d+giorno+1720994.5-yy_negativo;return dataGiuliana+=(3600*ora+60*minuti+secondi)/86400,dataGiuliana=dataGiuliana.toFixed(6)}function calcola_jdUT0(){var $=new Date,s=$.getYear(),_=$.getMonth(),d=$.getDate();s<1900&&(s+=1900);var o=costanti_jd(d,_+=1,s,0,0,0);return 1*o}function calcola_dd_mese($,s){var _=calcola_jddata(1,$,s,0,0,0),d=0;for(d=1;d<31&&(data=jd_data(_+d),$==data[1]);d++);return d}function jd_data($){var s=parseInt($+.5),_=$+.5-s,d=0,o=0;s>=2229160?(d=parseInt((s-1867216.25)/36524.25),o=s+1+d-parseInt(d/4)):o=s;var n=o+1524,i=parseInt((n-122.1)/365.25),t=parseInt(365.25*i),e=parseInt((n-t)/30.6001),R=n-t+_-parseInt(30.6001*e),r=0;e<13.5?r=e-1:e>13.5&&(r=e-13);var c=0;r>2.5?c=i-4716:r<2.5&&(c=i-4715);var l=(($=jdHO($))+1.5)%7,u=l,g="";return 0==l?(l="Do",g="Su"):1==l?(l="Lu",g="Mo"):2==l?(l="Ma",g="Tu"):3==l?(l="Me",g="We"):4==l?(l="Gi",g="Th"):5==l?(l="Ve",g="Fr"):6==l&&(l="Sa",g="Sa"),[R,r,c,l,g,u]}function calcola_jda(){var $=new Date().getYear();$<1900&&($+=1900);var s=costanti_jd(0,1,$,0,0,0);return 1*s}function calcola_jd_anno($){var s=costanti_jd(0,1,$,0,0,0);return 1*s}function calcola_jddata($,s,_,d,o,n){var i=costanti_jd($,s,_,d,o,n);return 1*i}function jdHO($){return $=$-parseInt($)<.5?parseInt($)-.5:parseInt($)+.5}function temposid($){var s,_=jdHO($),d=(_-2415020)/36525,o=.276919398+100.0021359*d+1075e-9*d*d,n=(o=(o-parseInt(o))*24)+1.002737908*(($-_)*24);return ore_24(n)}function temposid_app($){var s=temposid($),_=nutazione($),d=obli_ecli($),o=_[0]*Math.cos(Rad(d))/15,n=s+(o/=3600);return ore_24(n)}function TSL($,s){var _=$+s/15;return ore_24(_)}function tras_tsg_tmg($){var s=new Date().getYear();s<1900&&(s+=1900);var _=calcola_jda(),d=(_-2415020)/36525,o=24-(6.6460656+2400.051262*d+2581e-8*d*d-24*(s-1900));o=ore_24(o);var n=.0657098*Math.floor(calcola_jd()-_)-o;n=ore_24(n);var i=$-n;return i=ore_24(i),i*=.99727}function tsg_tmg_data($,s,_){var d=calcola_jd_anno(s),o=(d-2415020)/36525,n=24-(6.6460656+2400.051262*o+2581e-8*o*o-24*(s-1900)),i=.0657098*Math.floor(_-d)-(n=ore_24(n));i=1*ore_24(i);var t=$-i;return t=1*ore_24(t),t*=.99727}function sc_ore($){var s=ore_24($),_=parseInt(s),d=parseInt((s-_)*60),o=parseInt(((s-_)*60-d)*60);return _=String(_),d=String(d),o=String(o),_.length<2&&(_="0"+_),d.length<2&&(d="0"+d),o.length<2&&(o="0"+o),_+"h. "+d+"m. "+o+"s."}function sc_oresd($){var s=ore_24($),_=parseInt(s),d=parseInt((s-_)*60),o=(((s-_)*60-d)*60).toFixed(2);return o>=60&&(o-=60,d+=1),d>=60&&(d-=60,_+=1),_>=24&&(_=ore_24(_)),_=String(_),d=String(d),o=String(o),_.length<2&&(_="0"+_),d.length<2&&(d="0"+d),o.length<=4&&(o="0"+o),_+"h. "+d+"m. "+o+"s."}function sc_md($){var s=Math.abs($),_=parseInt(s),d=((s-_)*60).toFixed(1);return d>=60&&(d-=60,_+=1),_=String(_),d=String(d),$<0&&(_="-"+_),_.length<2&&(_="0"+_),d.length<3&&(d="0"+d),_+"m. "+d+"s."}function sc_angolo($){var s=Math.abs($),_=parseInt(s),d=parseInt((s-_)*60),o=parseInt(((s-_)*60-d)*60),n=String(_),i=String(d),t=String(o);return $<0&&(n="-"+n),n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),t.length<2&&(t="0"+t),n+"&ordm; "+i+"' "+t+"''"}function sc_angolo_sd($){var s=Math.abs($),_=parseInt(s),d=parseInt((s-_)*60),o=(((s-_)*60-d)*60).toFixed(2);o>=60&&(o-=60,d+=1),d>=60&&(d-=60,_+=1);var n=String(_),i=String(d),t=String(o);return $<0&&(n="-"+n),n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),t.length<=4&&(t="0"+t),n+"&ordm; "+i+"' "+t+"''"}function sc_angolo_gm($,s){var _=Math.abs($),d=parseInt(_),o=((_-d)*60).toFixed(s);o>=60&&(o-=60,d+=1);var n=String(d),i=String(o);return $<0&&(n="-"+n),n.length<2&&(n="0"+n),i.length<=4-s&&(i="0"+i),n+"&ordm; "+i+"' "}function sc_ore_hm($){var s=ore_24($),_=parseInt(s),d=parseInt((s-_)*60);return _=String(_),d=String(d),_.length<2&&(_="0"+_),d.length<2&&(d="0"+d),_+"h. "+d+"m."}function sc_ore_hmd($){var s=ore_24($),_=parseInt(s),d=((s-_)*60).toFixed(1);return d>=60&&(d-=60,_+=1),_>=24&&(_=ore_24(_)),_=String(_),d=String(d),_.length<2&&(_="0"+_),d.length<4&&(d="0"+d),_+"h. "+d+"m."}function sc_day($){var s=Math.abs($),_=parseInt(s),d=parseInt((s-_)*24),o=parseInt(((s-_)*24-d)*60),n=parseInt((((s-_)*24-d)*60-o)*60);return _=String(_),d=String(d),o=String(o),n=String(n),$<0&&(_="-"+_),_.length<2&&(_="0"+_),d.length<2&&(d="0"+d),o.length<2&&(o="0"+o),n.length<2&&(n="0"+n),_+"d. "+d+"h. "+o+"m. "+n+"s."}function sc_day_hm($){var s=Math.abs($),_=parseInt(s),d=parseInt((s-_)*24),o=parseInt(((s-_)*24-d)*60);return _=String(_),d=String(d),o=String(o),$<0&&(_="-"+_),_.length<2&&(_="0"+_),d.length<2&&(d="0"+d),o.length<2&&(o="0"+o),_+"d. "+d+"h. "+o+"m."}function ore_24($){if($>=24)for(;$>=24;)$-=24;else if($<0)for(;$<0;)$+=24;return $=$.toPrecision(12),$*=1}function ST_ASTRO_DATA($,s,_,d,o,n,i){var t=ST_ASTRO(s,_,d,o,n,i),e=1*t[0],R=1*t[1],r=1*t[5],c=1*t[6],l=1*t[7],u=1*jd_data($)[2],g=tsg_tmg_data(r,u,$),v=tsg_tmg_data(c,u,$),f=tsg_tmg_data(l,u,$);return[e,R,g,v,f,1*t[8]]}function ST_SOLE_LUNA($,s,_,d,o,n,i){var t=0;"TL"==s?t=-fuso_loc():"TU"==s&&(t=0);var e=0,R=0,r=0,c=0,l=0,u=0,g=0,v=1*$,f=0,p=0,w=0;for(a=0;a<8;a++)"L"==_?(e=pos_luna(v),f=cor_parall(v,e[0],e[1],1.019,o,d,n),e[0]=f[0],e[1]=f[1]):"S"==_&&(e=pos_sole(v)),R=(g=ST_ASTRO_DATA(v,e[0],e[1],d,o,n,i))[2]+t,(R=ore_24(R))>22&&(p=22),22==p&&R<22&&(w=22),22==p&&22==w?(v=$,R=0):v=1*$+R/24;for(a=0,l=g[0].toFixed(1),v=$,p=0,w=0;a<8;a++)"L"==_?(e=pos_luna(v),f=cor_parall(v,e[0],e[1],1.019,o,d,n),e[0]=f[0],e[1]=f[1]):"S"==_&&(e=pos_sole(v)),c=(g=ST_ASTRO_DATA(v,e[0],e[1],d,o,n,i))[3]+t,(c=ore_24(c))>22&&(p=22),22==p&&c<22&&(w=22),22==p&&22==w?(v=$,c=0):v=1*$+c/24;for(a=0,v=$,p=0,w=0;a<8;a++)"L"==_?(e=pos_luna(v),f=cor_parall(v,e[0],e[1],1.019,o,d,n),e[0]=f[0],e[1]=f[1]):"S"==_&&(e=pos_sole(v)),r=(g=ST_ASTRO_DATA(v,e[0],e[1],d,o,n,i))[4]+t,(r=ore_24(r))>22&&(p=22),22==p&&r<22&&(w=22),22==p&&22==w?(v=$,r=0):v=1*$+r/24;return u=g[1].toFixed(1),v=$,p=0,w=0,R>0?R=sc_ore_hm(R):0==R&&(R=""),c>0?c=sc_ore_hm(c):0==c&&(c=""),r>0?r=sc_ore_hm(r):0==r&&(r=""),[l,u,R,c,r]}function eq_tempo(){var $=calcola_jd();$=jdHO($)+.5;var s=pos_sole($),_=jd_data($),d=12-tsg_tmg_data(s[0],_[2],$);return d*=60,d=d.toFixed(6)}function eq_tempo_data($,s){s=jdHO(s)+.5;var _=pos_sole(s),d=12-tsg_tmg_data(_[0],$,s);return d*=60,d=d.toFixed(6)}function eq_tempo_data2($,s){s=jdHO(s);var _=pos_sole(s),d=pos_app(s,_[0],_[1]),o=temposid_app(s),n=0,i=o-d[0];return i<0&&(n=12+i),i>0&&(n=i-12),n*=60,n=n.toFixed(6)}function quadrante($,s){var _=Math.abs(Math.atan($/s));return _=180*_/Math.PI,s>0&&$>0||(s<0&&$>0?_=180-_:s<0&&$<0?_=180+_:s>0&&$<0&&(_=360-_)),_}function trasf_ecli_equa($,s,_){var d=obli_ecli($);d=d/180*Math.PI;var o=Math.sin(s=s/180*Math.PI)*Math.cos(d)-Math.tan(_=_/180*Math.PI)*Math.sin(d),n=Math.cos(s),i=quadrante(o,n)/15,t=Math.sin(_)*Math.cos(d)+Math.cos(_)*Math.sin(d)*Math.sin(s);return t=180*(t=Math.asin(t))/Math.PI,[i,t]}function obli_ecli($){var s=($-2415020)/36525;return 23.452294-.0130125*s-164e-8*s*s+503e-9*s*s*s}function precess($,s,_,d){var o=($-2415020.313)/36524.2199,n=(s-$)/36524.2199,i=(2304.25+1.396*o)*n+.302*n*n+.018*n*n*n,t=i+.791*n*n+.001*n*n*n,e=(2004.682-.853*o)*n-.426*n*n-.042*n*n*n;_*=15,i/=3600,t/=3600,e/=3600;var R=Math.cos(Rad(d))*Math.sin(Rad(_+i)),r=Math.cos(Rad(e))*Math.cos(Rad(d))*Math.cos(Rad(_+i))-Math.sin(Rad(e))*Math.sin(Rad(d)),c=Math.asin(Math.sin(Rad(e))*Math.cos(Rad(d))*Math.cos(Rad(_+i))+Math.cos(Rad(e))*Math.sin(Rad(d)));c=Rda(c);var l=quadrante(Rda(R),Rda(r));return l+=t,l=gradi_360(l),[l/=15,c,i,t,e]}function pos_stars($,s,_,d,o,n){var i,t,e=(n-$)/36524.2199,s=15*s+d*(e*=100),_=_+o*e,R=precess($,n,s/=15,_);return[R[0],R[1]]}function angolo_H($,s,_){var d=temposid($),o=TSL(d,_)-s;return 1*ore_24(o)}function trasf_equa_azim($,s,_,d,o){var n=angolo_H($,s,d);n=Rad(15*n),s=Rad(15*s),_=Rad(_),d=Rad(d);var i=Math.sin(_)*Math.sin(o=Rad(o))+Math.cos(_)*Math.cos(o)*Math.cos(n);i=Math.asin(i),i=Rda(i);var t=(Math.sin(_)-Math.sin(o)*Math.sin(Rad(i)))/(Math.cos(o)*Math.cos(Rad(i)));return t=Math.acos(t),t=Rda(t),t=t=0>Math.sin(n)?t:360-t,[i,t]}function trasf_azim_equa($,s,_,d){var o=Math.sin(Rad($))*Math.sin(Rad(_))+Math.cos(Rad($))*Math.cos(Rad(_))*Math.cos(Rad(s));o=Math.asin(o),o=Rda(o);var n=(Math.sin(Rad($))-Math.sin(Rad(_))*Math.sin(Rad(o)))/(Math.cos(Rad(_))*Math.cos(Rad(o)));n=Math.acos(n),n=Rda(n),n=n=0>Math.sin(Rad(s))?n:360-n;var i=d-(n/=15);return i<0&&(i+=24),[o,i,n]}function eq_keplero($,s){for(var _=$=$/180*Math.PI,d=$,o=1;o>1e-12;)_=d,d=$+s*Math.sin(_),o=Math.abs(_-d);var n=2*Math.atan(Math.sqrt((1+s)/(1-s))*Math.tan(_/2));return[_,n]}function gradi_360($){if($>360)for(;$>360;)$-=360;else if($<0)for(;$<0;)$+=360;return $}function Rad($){return $/180*Math.PI}function Rda($){return 180*$/Math.PI}function pos_sole($){var s=($-2415020)/36525;Long_epoca=279.69668+36000.76892*s+3025e-7*s*s,ecc_orbita=.01675104-418e-7*s-126e-9*s*s,Long_perigeo=gradi_360(Long_epoca-(M=358.47583+35999.04975*s-15e-5*s*s-33e-7*s*s*s));var _=153.23+22518.7541*s,d=216.57+45037.5082*s,o=312.69+32964.3577*s,n=350.74+445267.1142*s-.00144*s*s,i=231.19+20.2*s,t=353.4+65928.7155*s;_=Rad(_),d=Rad(d),o=Rad(o),n=Rad(n),i=Rad(i);var e=.00134*Math.cos(_)+.00154*Math.cos(d)+.002*Math.cos(o)+.00179*Math.sin(n)+.00178*Math.sin(i),R=543e-8*Math.sin(_)+1575e-8*Math.sin(d)+1627e-8*Math.sin(o)+3076e-8*Math.cos(n)+927e-8*Math.sin(t=Rad(t)),r=.999996;M=gradi_360(M);var i=eq_keplero(M,ecc_orbita),c=i[1],l=r*(1-ecc_orbita*Math.cos(i[0])),u=1919.22/(l+=R);u=u.toFixed(1);var g=8.794/3600/l,v=Rda(c)+Long_perigeo;v=gradi_360(v+e);var f=trasf_ecli_equa($,v,0);return f[2]=v,f[3]=M,f[4]=l,f[5]=u,f[6]=g,f}function cfasi_lunari($,s,_){var d=(s+$/12-1900)*12.3685,o=(d=1*parseInt(d)+1*_)/1236.85,n=166.56+132.87*o-.009173*o*o,i=2415020.75933+29.53058868*d+1178e-7*o*o-155e-9*o*o*o+33e-5*Math.sin(n=n/180*Math.PI),t=359.2242+29.10535608*d-333e-7*o*o-347e-8*o*o*o;t=(t=gradi_360(t))/180*Math.PI;var e=306.0253+385.81691806*d+.0107306*o*o+1236e-8*o*o*o;e=(e=gradi_360(e))/180*Math.PI;var R=21.2964+390.67050646*d-.0016528*o*o-239e-8*o*o*o;R=(R=gradi_360(R))/180*Math.PI;var r=0;0==_||.5==_?r=(.1734-393e-6*o)*Math.sin(t)+.0021*Math.sin(2*t)-.4068*Math.sin(e)+.0161*Math.sin(2*e)-4e-4*Math.sin(3*e)+.0104*Math.sin(2*R)-.0051*Math.sin(t+e)-.0074*Math.sin(t-e)+4e-4*Math.sin(2*R+t)-4e-4*Math.sin(2*R-t)-6e-4*Math.sin(2*R+e)+.001*Math.sin(2*R-e)+5e-4*Math.sin(t+2*e):.25==_||.75==_?r=(.1721-4e-4*o)*Math.sin(t)+.0021*Math.sin(2*t)-.628*Math.sin(e)+.0089*Math.sin(2*e)-4e-4*Math.sin(3*e)+.0079*Math.sin(2*R)-.0119*Math.sin(t+e)-.0047*Math.sin(t-e)+3e-4*Math.sin(2*R+t)-4e-4*Math.sin(2*R-t)-6e-4*Math.sin(2*R+e)+.0021*Math.sin(2*R-e)+3e-4*Math.sin(t+2*e)+4e-4*Math.sin(t-2*e)-3e-4*Math.sin(2*t+e):alert("Valore fase "+_+" non valido!");var i=i+r;return i}function rec_mese($){if(void 0!=$&&($-=1),void 0==$)var $=new Date().getMonth(),s="";return 0==$?s="Gennaio":1==$?s="Febbraio":2==$?s="Marzo":3==$?s="Aprile":4==$?s="Maggio":5==$?s="Giugno":6==$?s="Luglio":7==$?s="Agosto":8==$?s="Settembre":9==$?s="Ottobre":10==$?s="Novembre":11==$&&(s="Dicembre"),s}function effemeridi_sole($,s,_,d,o,n){var i=calcola_jdUT0();i+=78e-5;var t=0,e=0,R=o,r=0,c=0,l=0,u="colore_tabellaef1",g=0,v=0,f="",p=0;for(document.write("<table width=100% class='.table_effemeridi'>"),document.write("   <tr>"),"EN"!=n&&(document.write("     <td class='colore_tabella'>Data:</td>"),document.write("     <td class='colore_tabella'>Sorge:</td>"),document.write("     <td class='colore_tabella'>Culmina:</td>"),document.write("     <td class='colore_tabella'>Tramonta:</td>"),document.write("     <td class='colore_tabella'>Az. Sorge:</td>"),document.write("     <td class='colore_tabella'>Az. Tram.:</td>"),document.write("     <td class='colore_tabella'>Ascensione Retta:</td>"),document.write("     <td class='colore_tabella'>Declinazione:</td>"),document.write("     <td class='colore_tabella'>Inizio Crep.:</td>"),document.write("     <td class='colore_tabella'>Fine Crep.:</td>"),document.write("     <td class='colore_tabella'>Cost.:</td>")),"EN"==n&&(document.write("     <td class='colore_tabella'>Date:</td>"),document.write("     <td class='colore_tabella'>Rise:</td>"),document.write("     <td class='colore_tabella'>Transit:</td>"),document.write("     <td class='colore_tabella'>Set:</td>"),document.write("     <td class='colore_tabella'>Az. Rise:</td>"),document.write("     <td class='colore_tabella'>Az. Set.:</td>"),document.write("     <td class='colore_tabella'>Right Ascension:</td>"),document.write("     <td class='colore_tabella'>Declination:</td>"),document.write("     <td class='colore_tabella'>Beg. Twilight:</td>"),document.write("     <td class='colore_tabella'>End. Twilight:</td>"),document.write("     <td class='colore_tabella'>Const.:</td>")),document.write("   </tr>"),i-=1,b=0;b<R;b++)i+=1,p=ST_SOLE_LUNA(i,$,"S",_,s,d,.25),r=pos_sole(i),v=pos_app(i,r[0],r[1]),c=sc_ore(v[0]),l=sc_angolo(v[1]),g=crepuscolo(i,$,_,s,d),t=jd_data(i),"EN"!=n&&(e=Lnum(parseInt(t[0]),2)+" : "+Lnum(parseInt(t[1]),2)+"| "+t[3]),"EN"==n&&(e=Lnum(parseInt(t[0]),2)+" : "+Lnum(parseInt(t[1]),2)+"| "+t[4]),f=costell(v[0]),u=b%2==0?"colore_tabellaef2":"colore_tabellaef1",document.write("   <tr>"),document.write("     <td class='"+u+"'>"+e+"</td>"),document.write("     <td class='"+u+"'>"+p[2]+"</td>"),document.write("     <td class='"+u+"'>"+p[3]+"</td>"),document.write("     <td class='"+u+"'>"+p[4]+"</td>"),document.write("     <td class='"+u+"'>"+p[0]+"&deg;</td>"),document.write("     <td class='"+u+"'>"+p[1]+"&deg;</td>"),document.write("     <td class='"+u+"'>"+c+"</td>"),document.write("     <td class='"+u+"'>"+l+"</td>"),document.write("     <td class='"+u+"'>"+g[0]+"</td>"),document.write("     <td class='"+u+"'>"+g[1]+"</td>"),document.write("     <td class='"+u+"'>"+f+"</td>"),document.write("   </tr>");document.write(" </table>")}function effemeridi_luna($,s,_,d,o,n){var i=calcola_jdUT0();i+=78e-5;var t=0,e=0,R=o,r=0,c=0,l=0,u="colore_tabellaef1",g=0,v=0,f=0,p="";for(document.write("<table width=100% class='.table_effemeridi'>"),document.write("   <tr>"),"EN"!=n&&(document.write("     <td class='colore_tabella'>Data:</td>"),document.write("     <td class='colore_tabella'>Sorge:</td>"),document.write("     <td class='colore_tabella'>Culmina:</td>"),document.write("     <td class='colore_tabella'>Tramonta:</td>"),document.write("     <td class='colore_tabella'>Az. Sorge:</td>"),document.write("     <td class='colore_tabella'>Az. Tramonta:</td>"),document.write("     <td class='colore_tabella'>Ascensione Retta:</td>"),document.write("     <td class='colore_tabella'>Declinazione:</td>"),document.write("     <td class='colore_tabella'>Fase:</td>"),document.write("     <td class='colore_tabella'>Elong:</td>"),document.write("     <td class='colore_tabella'>Cost.:</td>")),"EN"==n&&(document.write("     <td class='colore_tabella'>Date:</td>"),document.write("     <td class='colore_tabella'>Rise:</td>"),document.write("     <td class='colore_tabella'>Transit:</td>"),document.write("     <td class='colore_tabella'>Set:</td>"),document.write("     <td class='colore_tabella'>Az. Rise:</td>"),document.write("     <td class='colore_tabella'>Az. Set:</td>"),document.write("     <td class='colore_tabella'>Right Ascension:</td>"),document.write("     <td class='colore_tabella'>Declination:</td>"),document.write("     <td class='colore_tabella'>Phase:</td>"),document.write("     <td class='colore_tabella'>Elong:</td>"),document.write("     <td class='colore_tabella'>Const.:</td>")),document.write("   </tr>"),i-=1,b=0;b<R;b++)i+=1,v=ST_SOLE_LUNA(i,$,"L",_,s,d,.25),r=pos_luna(i),f=pos_app(i,r[0],r[1]),c=sc_ore(f[0]),l=sc_angolo(f[1]),g=r[4].toFixed(2),t=jd_data(i),"EN"!=n&&(e=Lnum(parseInt(t[0]),2)+" : "+Lnum(parseInt(t[1]),2)+"| "+t[3]),"EN"==n&&(e=Lnum(parseInt(t[0]),2)+" : "+Lnum(parseInt(t[1]),2)+"| "+t[4]),fase_luna=r[3].toFixed(2),p=costell(f[0]),u=b%2==0?"colore_tabellaef2":"colore_tabellaef1",document.write("   <tr>"),document.write("     <td class='"+u+"'>"+e+"</td>"),document.write("     <td class='"+u+"'>"+v[2]+"</td>"),document.write("     <td class='"+u+"'>"+v[3]+"</td>"),document.write("     <td class='"+u+"'>"+v[4]+"</td>"),document.write("     <td class='"+u+"'>"+v[0]+"&deg;</td>"),document.write("     <td class='"+u+"'>"+v[1]+"&deg;</td>"),document.write("     <td class='"+u+"'>"+c+"</td>"),document.write("     <td class='"+u+"'>"+l+"</td>"),document.write("     <td class='"+u+"'>"+fase_luna+"</td>"),document.write("     <td class='"+u+"'>"+g+"</td>"),document.write("     <td class='"+u+"'>"+p+"</td>"),document.write("   </tr>");document.write(" </table>")}function cor_parall($,s,_,d,o,n,i){temposid($);var t,e=15*angolo_H($,s,n),R=e/180*Math.PI,r=o/180*Math.PI,c=Math.atan(.996647*Math.tan(r)),l=.996647*Math.sin(c)+i/6378140*Math.sin(r),u=Math.cos(c)+i/6378140*Math.cos(r),g=1/Math.sin(d/180*Math.PI),v=_/180*Math.PI,f=u*Math.sin(R),p=g*Math.cos(v)-u*Math.cos(R),w=Math.atan(f/p),m=(e+(w=180*w/Math.PI))/180*Math.PI,S=Math.cos(m)*(g*Math.sin(v)-l),T=g*Math.cos(v)*Math.cos(R)-u,h=Math.atan(S/T);return[s-w/15,h=180*h/Math.PI]}function crepuscolo($,s,_,d,o){var n=0;"TL"==s?n=-fuso_loc():"TU"==s&&(n=0);var i=pos_sole($),t=i[1],e=d/180*Math.PI,R=t/180*Math.PI,r=Math.acos(-Math.tan(e)*Math.tan(R)),c=Math.acos((-.3090169637947941-Math.sin(e)*Math.sin(R))/(Math.cos(e)*Math.cos(R))),r=180*r/Math.PI,c=180*c/Math.PI,l=(c-r)/15*.9973,u=ST_ASTRO_DATA($,i[0],i[1],_,d,o,.25),g=ore_24(u[2]-l+n),v=ore_24(u[4]+l+n);return g=sc_ore_hm(g),v=sc_ore_hm(v),[g,v]}function crepuscolo_UT($,s,_,d){var o=pos_sole($)[1],n=Rad(_),i=Rad(o),t=Math.acos(-Math.tan(n)*Math.tan(i)),e=Math.acos((Math.cos(Rad(108))-Math.sin(n)*Math.sin(i))/(Math.cos(n)*Math.cos(i))),t=Rda(t),e=Rda(e),R=(e-t)/15*.9973,r=ST_SOLE($,s,_,d),c=ore_24(r[2]-R),l=ore_24(r[4]+R),u=r[4]-r[2],g=l-c,v=24-g;return[c,l,u,g,v]}function crepuscolo_CV($,s,_,d){var o=pos_sole($)[1],n=Rad(_),i=Rad(o),t=Math.acos(-Math.tan(n)*Math.tan(i)),e=Math.acos((Math.cos(Rad(96))-Math.sin(n)*Math.sin(i))/(Math.cos(n)*Math.cos(i))),t=Rda(t),e=Rda(e),R=(e-t)/15*.9973,r=ST_SOLE($,s,_,d),c=ore_24(r[2]-R),l=ore_24(r[4]+R);return[c,l]}function crepuscolo_NA($,s,_,d){var o=pos_sole($)[1],n=Rad(_),i=Rad(o),t=Math.acos(-Math.tan(n)*Math.tan(i)),e=Math.acos((Math.cos(Rad(102))-Math.sin(n)*Math.sin(i))/(Math.cos(n)*Math.cos(i))),t=Rda(t),e=Rda(e),R=(e-t)/15*.9973,r=ST_SOLE($,s,_,d),c=ore_24(r[2]-R),l=ore_24(r[4]+R);return[c,l]}function pos_pianeti($,s){var _=t_luce($,s),d=orb_plan($-=_,s);d[0];var o=d[1],n=d[2];d[3];var i=d[4],t=d[5],e=d[6],R=d[7],r=d[8],c=d[9],l=pos_pianeticr($,s);o+=l[0],n+=l[5],t+=l[3],i+=l[4];var u=n;u=gradi_360(u);var g=eq_keplero(u,i),v=t*(1-i*Math.cos(g[0]));v+=l[1];var f=gradi_360(o+Rda(g[1])-u-R),p=Math.cos(Rad(e))*Math.sin(Rad(f)),w=Math.cos(Rad(f)),m=quadrante(p,w)+R,S=gradi_360(m);S+=l[2];var T=Rda(Math.asin(Math.sin(Rad(f))*Math.sin(Rad(e)))),h=pos_sole($+=_),D=h[2],L=h[4],j=v*Math.cos(Rad(T))*Math.sin(Rad(S-D)),O=v*Math.cos(Rad(T))*Math.cos(Rad(S-D))+L,F=gradi_360(quadrante(j,O)+D),P=j*j+O*O+v*Math.sin(Rad(T))*(v*Math.sin(Rad(T)));P=Math.sqrt(P);var N=v/P*Math.sin(Rad(T)),q=Rda(Math.asin(N));q+=l[6];var I=.5*(1+Math.cos(Rad(F-m)));I=I.toFixed(2);var E=8.794/P/3600,z=trasf_ecli_equa($,F,q),C=r/P,J=5*Math.log(v*P/(c*Math.sqrt(I)))/2.30258-27.7;(J=J.toFixed(1))==1/0&&(J="nd");var G=elong(z[0],z[1],h[0],h[1]),H=P,U=L,k=v,V=(U*U+k*k-H*H)/(2*k*U),Y=180-Math.abs(G)-(V=Rda(V=Math.acos(V)));return[z[0],z[1],I,J,P,C,G,D,L,m,E,v,Y]}function effemeridi_pianeti($,s,_,d,o,n,i,t){var e=calcola_jdUT0();e+=78e-5;var R=0,r=0,c=n,l=-fuso_loc(),u=0,g=0,v=0,f=0,p=0,w=0,m=0,S=0,T="colore_tabellaef1",h=0,D=0,L=0,j=0,O=0,F=0,P="*",N=0;for(0==i&&(i=1),document.write("<table width=100% class='.table_effemeridi'>"),document.write("   <tr>"),"EN"!=t&&(document.write("     <td class='colore_tabella'>Data:</td>"),document.write("     <td class='colore_tabella'>Sorge:</td>"),document.write("     <td class='colore_tabella'>Culmina:</td>"),document.write("     <td class='colore_tabella'>Tramonta:</td>"),document.write("     <td class='colore_tabella'>A. So.:</td>"),document.write("     <td class='colore_tabella'>A. Tr.:</td>"),document.write("     <td class='colore_tabella'>A. Retta:</td>"),document.write("     <td class='colore_tabella'>Dec.:</td>"),document.write("     <td class='colore_tabella'>Fase.</td>"),document.write("     <td class='colore_tabella'>Dist.</td>"),document.write("     <td class='colore_tabella'>Dia.</td>"),document.write("     <td class='colore_tabella'>El.</td>"),document.write("     <td class='colore_tabella'>Ma.</td>"),document.write("     <td class='colore_tabella'>Cost.</td>")),"EN"==t&&(document.write("     <td class='colore_tabella'>Date:</td>"),document.write("     <td class='colore_tabella'>Rise:</td>"),document.write("     <td class='colore_tabella'>Transit:</td>"),document.write("     <td class='colore_tabella'>Set:</td>"),document.write("     <td class='colore_tabella'>Az. Rise:</td>"),document.write("     <td class='colore_tabella'>Az. Set:</td>"),document.write("     <td class='colore_tabella'>R.A.:</td>"),document.write("     <td class='colore_tabella'>Dec.:</td>"),document.write("     <td class='colore_tabella'>Ph.</td>"),document.write("     <td class='colore_tabella'>Dist.</td>"),document.write("     <td class='colore_tabella'>Dia.</td>"),document.write("     <td class='colore_tabella'>El.</td>"),document.write("     <td class='colore_tabella'>Ma.</td>"),document.write("     <td class='colore_tabella'>Const.</td>")),document.write("   </tr>"),e-=i,b=0;b<c;b+=i)e+=i,w=pos_pianeti(e,$),N=pos_app(e,w[0],w[1]),m=sc_ore(N[0]),S=sc_angolo(N[1],0),L=w[2],D=w[3],O=w[4].toFixed(3),j=w[5].toFixed(1),F=w[6].toFixed(1),P=costell(w[0]),h=ST_ASTRO_DATA(e,w[0],w[1],d,_,o,0),"TL"==s?(u=ore_24(h[2]+l),g=ore_24(h[3]+l),v=ore_24(h[4]+l)):(u=ore_24(h[2]),g=ore_24(h[3]),v=ore_24(h[4])),u=sc_ore_hm(u),g=sc_ore_hm(g),v=sc_ore_hm(v),R=jd_data(e),"EN"!=t&&(r=Lnum(parseInt(R[0]),2)+":"+Lnum(parseInt(R[1]),2)+" |"+R[3]),"EN"==t&&(r=Lnum(parseInt(R[0]),2)+":"+Lnum(parseInt(R[1]),2)+" |"+R[4]),f=h[0].toFixed(1),p=h[1].toFixed(1),T=b%2==0?"colore_tabellaef2":"colore_tabellaef1",document.write("   <tr>"),document.write("     <td class='"+T+"'>"+r+"</td>"),document.write("     <td class='"+T+"'>"+u+"</td>"),document.write("     <td class='"+T+"'>"+g+"</td>"),document.write("     <td class='"+T+"'>"+v+"</td>"),document.write("     <td class='"+T+"'>"+f+"&deg;</td>"),document.write("     <td class='"+T+"'>"+p+"&deg;</td>"),document.write("     <td class='"+T+"'>"+m+"</td>"),document.write("     <td class='"+T+"'>"+S+"</td>"),document.write("     <td class='"+T+"'>"+L+"</td>"),document.write("     <td class='"+T+"'>"+O+"</td>"),document.write("     <td class='"+T+"'>"+j+"</td>"),document.write("     <td class='"+T+"'>"+F+"</td>"),document.write("     <td class='"+T+"'>"+D+"</td>"),document.write("     <td class='"+T+"'>"+P+"</td>"),document.write("   </tr>");document.write(" </table>")}function pos_pianeticr($,s){var _=($-2415020)/36525;M=358.47583+35999.04975*_-15e-5*_*_-33e-7*_*_*_,M1=102.27938+149472.51529*_+7e-6*_*_,M2=212.60322+58517.80387*_+.001286*_*_,M4=319.51913+19139.85475*_+181e-6*_*_,M5=225.32833+3034.69202*_-722e-6*_*_,M6=175.46622+1221.55147*_-502e-6*_*_;var d=0,o=0,n=0,i=0,t=0,e=0,R=0,r=0;if(0==s)n=.00204*Math.cos(Rad(5*M2-2*M1+12.22))+.00103*Math.cos(Rad(2*M2-M1-160.692))+91e-5*Math.cos(Rad(2*M5-M1-37.003))+78e-5*Math.cos(Rad(5*M2-3*M1+10.137)),o=7525e-9*Math.cos(Rad(2*M5-M1+53.013))+6802e-9*Math.cos(Rad(5*M2-3*M1-259.918))+5457e-9*Math.cos(Rad(2*M2-2*M1-71.188))+3569e-9*Math.cos(Rad(5*M2-M1-77.75));else if(1==s)R=d=77e-5*Math.sin(Rad(237.24+150.27*_)),n=.00313*Math.cos(Rad(2*M-2*M2-148.225))+.00198*Math.cos(Rad(3*M-3*M2+2.565))+.00136*Math.cos(Rad(M-M2-119.107))+96e-5*Math.cos(Rad(3*M-2*M2-135.912))+82e-5*Math.cos(Rad(M5-M2-208.087)),o=22501e-9*Math.cos(Rad(2*M-2*M2-58.208))+19045e-9*Math.cos(Rad(3*M-3*M2+92.577))+6887e-9*Math.cos(Rad(M5-M2-118.09))+5172e-9*Math.cos(Rad(M-M2-29.11))+362e-8*Math.cos(Rad(5*M-4*M2-104.208))+3283e-9*Math.cos(Rad(4*M-4*M2+63.513))+3074e-9*Math.cos(Rad(2*M5-2*M2-55.167));else if(2==s){d=0;var c=153.23+22518.7541*_,l=216.57+45037.5082*_,u=312.69+32964.3577*_,g=350.74+445267.1142*_-.00144*_*_,v=231.19+20.2*_,f=353.4+65928.7155*_;c=Rad(c),l=Rad(l),u=Rad(u),g=Rad(g),v=Rad(v);var n=.00134*Math.cos(c)+.00154*Math.cos(l)+.002*Math.cos(u)+.00179*Math.sin(g)+.00178*Math.sin(v),o=543e-8*Math.sin(c)+1575e-8*Math.sin(l)+1627e-8*Math.sin(u)+3076e-8*Math.cos(g)+927e-8*Math.sin(f=Rad(f))}if(3==s&&(R=d=-.01133*Math.sin(Rad(3*M5-8*M4+4*M))-.00933*Math.cos(Rad(3*M5-8*M4+4*M)),n=.00705*Math.cos(Rad(M5-M4-48.958))+.00607*Math.cos(Rad(2*M5-M4-118.35))+.00445*Math.cos(Rad(2*M5-2*M4-191.897))+.00388*Math.cos(Rad(M-2*M4+20.495))+.00238*Math.cos(Rad(M-M4+35.097))+.00204*Math.cos(Rad(2*M-3*M4+158.638))+.00177*Math.cos(Rad(3*M4-M2-57.602))+.00136*Math.cos(Rad(2*M-4*M4+154.093))+.00104*Math.cos(Rad(M5+17.618)),o=53227e-9*Math.cos(Rad(M5-M4+41.1306))+50989e-9*Math.cos(Rad(2*M5-2*M4-101.9847))+38278e-9*Math.cos(Rad(2*M5-M4-98.3292))+15996e-9*Math.cos(Rad(M-M4-55.555))+14764e-9*Math.cos(Rad(2*M-3*M4+68.622))+8966e-9*Math.cos(Rad(M5-2*M4+43.615))+7914e-9*Math.cos(Rad(3*M5-2*M4-139.737))+7004e-9*Math.cos(Rad(2*M5-3*M4-102.888))+662e-8*Math.cos(Rad(M-2*M4+113.202))+493e-8*Math.cos(Rad(3*M5-3*M4-76.243))+4693e-9*Math.cos(Rad(3*M-5*M4+190.603))+4571e-9*Math.cos(Rad(2*M-4*M4+244.702))+4409e-9*Math.cos(Rad(3*M5-M4-115.828))),4==s){var p=_/5+.1,w=237.47555+3034.9061*_,m=265.9165+1222.1139*_,S=243.51721+428.4677*_,T=5*m-2*w,h=2*w-6*m+3*S,D=m-w;n=(.331364-.010281*p-.004692*p*p)*Math.sin(Rad(T))+(.003228-.064436*p+.002075*p*p)*Math.cos(Rad(T))-(.003083+275e-6*p-489e-6*p*p)*Math.sin(Rad(2*T))+.002472*Math.sin(Rad(h))+.013619*Math.sin(Rad(D))+.018472*Math.sin(Rad(2*D))+.006717*Math.sin(Rad(3*D))+.002775*Math.sin(Rad(4*D))+(.007275-.001253*p)*Math.sin(Rad(D))*Math.sin(Rad(m))+.006417*Math.sin(Rad(2*D))*Math.sin(Rad(m))+.002439*Math.sin(Rad(3*D))*Math.sin(Rad(m))-(.033839+.001125*p)*Math.cos(Rad(D))*Math.sin(Rad(m))-.003767*Math.cos(Rad(2*D))*Math.sin(Rad(m))-(.035681+.001208*p)*Math.sin(Rad(D))*Math.cos(Rad(m))-.004261*Math.sin(Rad(2*D))*Math.cos(Rad(m))+.002178*Math.cos(Rad(m))+(-.006333+.001161*p)*Math.cos(Rad(D))*Math.cos(Rad(m))-.006675*Math.cos(Rad(2*D))*Math.cos(Rad(m))-.002664*Math.cos(Rad(3*D))*Math.cos(Rad(m))-.002572*Math.sin(Rad(D))*Math.sin(Rad(2*m))-.003567*Math.sin(Rad(2*D))*Math.sin(Rad(2*m))+.002094*Math.cos(Rad(D))*Math.cos(Rad(2*m))+.003342*Math.cos(Rad(2*D))*Math.cos(Rad(2*m)),i=(.007192-.003147*p)*Math.sin(Rad(T))+(-.020428-675e-6*p+197e-6*p*p)*Math.cos(Rad(T))+(.007269+672e-6*p)*Math.sin(Rad(D))*Math.sin(Rad(m))-.004344*Math.sin(Rad(m))+.034036*Math.cos(Rad(D))*Math.sin(Rad(m))+.005614*Math.cos(Rad(2*D))*Math.sin(Rad(m))+.002964*Math.cos(Rad(3*D))*Math.sin(Rad(m))+.037761*Math.sin(Rad(D))*Math.cos(Rad(m))+.006158*Math.sin(Rad(2*D))*Math.cos(Rad(m))-.006603*Math.cos(Rad(D))*Math.cos(Rad(m))-.005356*Math.sin(Rad(D))*Math.sin(Rad(2*m))+.002722*Math.sin(Rad(2*D))*Math.sin(Rad(2*m))+.004483*Math.cos(Rad(D))*Math.sin(Rad(2*m))-.002642*Math.cos(Rad(2*D))*Math.sin(Rad(2*m))+.004403*Math.sin(Rad(D))*Math.cos(Rad(2*m))-.002536*Math.sin(Rad(2*D))*Math.cos(Rad(2*m))+.005547*Math.cos(Rad(D))*Math.cos(Rad(2*m))-.002689*Math.cos(Rad(2*D))*Math.cos(Rad(2*m));var L=orb_plan($,4),j=L[4];R=n-i/j,t=-263*Math.cos(Rad(T))+205*Math.cos(Rad(D))+693*Math.cos(Rad(2*D))+312*Math.cos(Rad(3*D))+147*Math.cos(Rad(4*D))+299*Math.sin(Rad(D))*Math.sin(Rad(m))+181*Math.cos(Rad(2*D))*Math.sin(Rad(m))+204*Math.sin(Rad(2*D))*Math.cos(Rad(m))+111*Math.sin(Rad(3*D))*Math.cos(Rad(m))-337*Math.cos(Rad(D))*Math.cos(Rad(m))-111*Math.cos(Rad(2*D))*Math.cos(Rad(m)),t/=1e6,e=(3606+130*p-43*p*p)*Math.sin(Rad(T))+(1289-580*p)*Math.cos(Rad(T))-6764*Math.sin(Rad(D))*Math.sin(Rad(m))-1110*Math.sin(Rad(2*D))*Math.sin(Rad(m))-224*Math.sin(Rad(3*D))*Math.sin(Rad(m))-204*Math.sin(Rad(m))+(1284+116*p)*Math.cos(Rad(D))*Math.sin(Rad(m))+188*Math.cos(Rad(2*D))*Math.sin(Rad(m))+(1460+130*p)*Math.sin(Rad(D))*Math.cos(Rad(m))+224*Math.sin(Rad(2*D))*Math.cos(Rad(m))-817*Math.cos(Rad(m))+6074*Math.cos(Rad(D))*Math.cos(Rad(m))+992*Math.cos(Rad(2*D))*Math.cos(Rad(m))+508*Math.cos(Rad(3*D))*Math.cos(Rad(m))+230*Math.cos(Rad(4*D))*Math.cos(Rad(m))+108*Math.cos(Rad(5*D))*Math.cos(Rad(m))-(956+73*p)*Math.sin(Rad(D))*Math.sin(Rad(2*m))+448*Math.sin(Rad(2*D))*Math.sin(Rad(2*m))+137*Math.sin(Rad(3*D))*Math.sin(Rad(2*m))+(-997+108*p)*Math.cos(Rad(D))*Math.sin(Rad(2*m))+480*Math.cos(Rad(2*D))*Math.sin(Rad(2*m))+148*Math.cos(Rad(3*D))*Math.sin(Rad(2*m))+(-956+99*p)*Math.sin(Rad(D))*Math.cos(Rad(2*m))+490*Math.sin(Rad(2*D))*Math.cos(Rad(2*m))+158*Math.sin(Rad(3*D))*Math.cos(Rad(2*m))+179*Math.cos(Rad(2*m))+(1024+75*p)*Math.cos(Rad(D))*Math.cos(Rad(2*m))-437*Math.cos(Rad(2*D))*Math.cos(Rad(2*m))-132*Math.cos(Rad(3*D))*Math.cos(Rad(2*m)),e/=1e7}if(5==s){var p=_/5+.1,w=237.47555+3034.9061*_,m=265.9165+1222.1139*_,S=243.51721+428.4677*_,T=5*m-2*w,h=2*w-6*m+3*S,D=m-w,O=S-m;n=+(-.814181+.01815*p+.016714*p*p)*Math.sin(Rad(T))+(-.010497+.160906*p-.0041*p*p)*Math.cos(Rad(T))+.007581*Math.sin(Rad(2*T))-.007986*Math.sin(Rad(h))-.148811*Math.sin(Rad(D))-.040786*Math.sin(Rad(2*D))-.015208*Math.sin(Rad(3*D))-.006339*Math.sin(Rad(4*D))-.006244*Math.sin(Rad(m))+(.008931+.002728*p)*Math.sin(Rad(D))*Math.sin(Rad(m))-.0165*Math.sin(Rad(2*D))*Math.sin(Rad(m))-.005775*Math.sin(Rad(3*D))*Math.sin(Rad(m))+(.081344+.003206*p)*Math.cos(Rad(D))*Math.sin(Rad(m))+.015019*Math.cos(Rad(2*D))*Math.sin(Rad(m))+(.085581+.002494*p)*Math.sin(Rad(D))*Math.cos(Rad(m))+(.025328-.003117*p)*Math.cos(Rad(D))*Math.cos(Rad(m))+.014394*Math.cos(Rad(2*D))*Math.cos(Rad(m))+.006319*Math.cos(Rad(3*D))*Math.cos(Rad(m))+.006369*Math.sin(Rad(D))*Math.sin(Rad(2*m))+.009156*Math.sin(Rad(2*D))*Math.sin(Rad(2*m))+.007525*Math.sin(Rad(3*O))*Math.sin(Rad(2*m))-.005236*Math.cos(Rad(D))*Math.cos(Rad(2*m))-.007736*Math.cos(Rad(2*D))*Math.cos(Rad(2*m))-.007528*Math.cos(Rad(3*O))*Math.cos(Rad(2*m)),e=+(-7927+2548*p+91*p*p)*Math.sin(Rad(T))+(13381+1226*p-253*p*p)*Math.cos(Rad(T))+(248-121*p)*Math.sin(Rad(2*T))-(305+91*p)*Math.cos(Rad(2*T))+412*Math.sin(Rad(D))+12415*Math.sin(Rad(m))+(390-617*p)*Math.sin(Rad(D))*Math.sin(Rad(m))+(165-204*p)*Math.sin(Rad(2*D))*Math.sin(Rad(m))+26599*Math.cos(Rad(D))*Math.sin(Rad(m))-4687*Math.cos(Rad(2*D))*Math.sin(Rad(m))-1870*Math.cos(Rad(3*D))*Math.sin(Rad(m))-821*Math.cos(Rad(4*D))*Math.sin(Rad(m))-377*Math.cos(Rad(5*D))*Math.sin(Rad(m))+497*Math.cos(Rad(2*O))*Math.sin(Rad(m))+(163-611*p)*Math.cos(Rad(m))-12696*Math.sin(Rad(D))*Math.cos(Rad(m))-4200*Math.sin(Rad(2*D))*Math.cos(Rad(m))-1503*Math.sin(Rad(3*D))*Math.cos(Rad(m))-619*Math.sin(Rad(4*D))*Math.cos(Rad(m))-268*Math.sin(Rad(5*D))*Math.cos(Rad(m))-(282+1306*p)*Math.cos(Rad(D))*Math.cos(Rad(m))+(-86+230*p)*Math.cos(Rad(2*D))*Math.cos(Rad(m))+461*Math.sin(Rad(2*O))*Math.cos(Rad(m))-350*Math.sin(Rad(2*m))+(2211-286*p)*Math.sin(Rad(D))*Math.sin(Rad(2*m))-2208*Math.sin(Rad(2*D))*Math.sin(Rad(2*m))-568*Math.sin(Rad(3*D))*Math.sin(Rad(2*m))-346*Math.sin(Rad(4*D))*Math.sin(Rad(2*m))-(2780+222*p)*Math.cos(Rad(D))*Math.sin(Rad(2*m))+(2022+263*p)*Math.cos(Rad(2*D))*Math.sin(Rad(2*m))+248*Math.cos(Rad(3*D))*Math.sin(Rad(2*m))+242*Math.sin(Rad(3*O))*Math.sin(Rad(2*m))+467*Math.cos(Rad(3*O))*Math.sin(Rad(2*m))-490*Math.cos(Rad(2*m))-(2842+279*p)*Math.sin(Rad(D))*Math.cos(Rad(2*m))+(128+226*p)*Math.sin(Rad(2*D))*Math.cos(Rad(2*m))+224*Math.sin(Rad(3*D))*Math.cos(Rad(2*m))+(-1594+282*p)*Math.cos(Rad(D))*Math.cos(Rad(2*m))+(2162-207*p)*Math.cos(Rad(2*D))*Math.cos(Rad(2*m))+561*Math.cos(Rad(3*D))*Math.cos(Rad(2*m))+343*Math.cos(Rad(4*D))*Math.cos(Rad(2*m))+469*Math.sin(Rad(3*O))*Math.cos(Rad(2*m))-242*Math.cos(Rad(3*O))*Math.cos(Rad(2*m))-205*Math.sin(Rad(D))*Math.sin(Rad(3*m))+262*Math.sin(Rad(3*D))*Math.sin(Rad(3*m))+208*Math.cos(Rad(D))*Math.cos(Rad(3*m))-271*Math.cos(Rad(3*D))*Math.cos(Rad(3*m))-382*Math.cos(Rad(3*D))*Math.sin(Rad(4*m))-376*Math.sin(Rad(3*D))*Math.cos(Rad(4*m)),e/=1e7,i=+(.077108+.007186*p-.001533*p*p)*Math.sin(Rad(T))+(.045803-.014766*p-536e-6*p*p)*Math.cos(Rad(T))-.007075*Math.sin(Rad(D))-.075825*Math.sin(Rad(D))*Math.sin(Rad(m))-.024839*Math.sin(Rad(2*D))*Math.sin(Rad(m))-.008631*Math.sin(Rad(3*D))*Math.sin(Rad(m))-.072586*Math.cos(Rad(m))-.150383*Math.cos(Rad(D))*Math.cos(Rad(m))+.026897*Math.cos(Rad(2*D))*Math.cos(Rad(m))+.010053*Math.cos(Rad(3*D))*Math.cos(Rad(m))-(.013597+.001719*p)*Math.sin(Rad(D))*Math.sin(Rad(2*m))+(-.007742+.001517*p)*Math.cos(Rad(D))*Math.sin(Rad(2*m))+(.013586-.001375*p)*Math.cos(Rad(2*D))*Math.sin(Rad(2*m))+(-.013667+.001239*p)*Math.sin(Rad(D))*Math.cos(Rad(2*m))+.011981*Math.sin(Rad(2*D))*Math.cos(Rad(2*m))+(.014861+.001136*p)*Math.cos(Rad(D))*Math.cos(Rad(2*m))-(.013064+.001628*p)*Math.cos(Rad(2*D))*Math.cos(Rad(2*m));var L=orb_plan($,5),j=L[4];R=n-i/j,t=572*p*Math.sin(Rad(T))+2933*Math.cos(Rad(T))+33629*Math.cos(Rad(D))-3081*Math.cos(Rad(2*D))-1423*Math.cos(Rad(3*D))-671*Math.cos(Rad(4*D))-320*Math.cos(Rad(5*D))+1098*Math.sin(Rad(m))-2812*Math.sin(Rad(D))*Math.sin(Rad(m))+688*Math.sin(Rad(2*D))*Math.sin(Rad(m))-393*Math.sin(Rad(3*D))*Math.sin(Rad(m))-228*Math.sin(Rad(4*D))*Math.sin(Rad(m))+2138*Math.cos(Rad(D))*Math.sin(Rad(m))-999*Math.cos(Rad(2*D))*Math.sin(Rad(m))-642*Math.cos(Rad(3*D))*Math.sin(Rad(m))-325*Math.cos(Rad(4*D))*Math.sin(Rad(m))-890*Math.cos(Rad(m))+2206*Math.sin(Rad(D))*Math.cos(Rad(m))-1590*Math.sin(Rad(2*D))*Math.cos(Rad(m))-647*Math.sin(Rad(3*D))*Math.cos(Rad(m))-344*Math.sin(Rad(4*D))*Math.cos(Rad(m))+2885*Math.cos(Rad(D))*Math.cos(Rad(m))+(2172+102*p)*Math.cos(Rad(2*D))*Math.cos(Rad(m))+296*Math.cos(Rad(3*D))*Math.cos(Rad(m))-267*Math.sin(Rad(2*D))*Math.sin(Rad(2*m))-778*Math.cos(Rad(D))*Math.sin(Rad(2*m))+495*Math.cos(Rad(2*D))*Math.sin(Rad(2*m))+250*Math.cos(Rad(3*D))*Math.sin(Rad(2*m))-856*Math.sin(Rad(D))*Math.cos(Rad(2*m))+441*Math.sin(Rad(2*D))*Math.cos(Rad(2*m))+296*Math.cos(Rad(2*D))*Math.cos(Rad(2*m))+211*Math.cos(Rad(3*D))*Math.cos(Rad(2*m))-427*Math.sin(Rad(D))*Math.sin(Rad(3*m))+398*Math.sin(Rad(3*D))*Math.sin(Rad(3*m))+344*Math.cos(Rad(D))*Math.cos(Rad(3*m))-427*Math.cos(Rad(3*D))*Math.cos(Rad(3*m)),t/=1e6,r=747e-6*Math.cos(Rad(D))*Math.sin(Rad(m))+.001069*Math.cos(Rad(D))*Math.cos(Rad(m))+.002108*Math.sin(Rad(2*D))*Math.sin(Rad(2*m))+.001261*Math.cos(Rad(2*D))*Math.sin(Rad(2*m))+.001236*Math.sin(Rad(2*D))*Math.cos(Rad(2*m))-.002075*Math.cos(Rad(2*D))*Math.cos(Rad(2*m))}if(6==s){var p=_/5+.1,w=237.47555+3034.9061*_,m=265.9165+1222.1139*_,S=243.51721+428.4677*_,h=2*w-6*m+3*S,F=83.76922+218.4901*_,f=2*F-S,D=S-w,P=S-m,N=F-S;d=+(.864319-.001583*p)*Math.sin(Rad(f))+(.082222-.006833*p)*Math.cos(Rad(f))+.036017*Math.sin(Rad(2*f))-.003019*Math.cos(Rad(2*f))+.008122*Math.sin(Rad(h));var l=.120303*Math.sin(Rad(f))+(.019472-947e-6*p)*Math.cos(Rad(f))+.006197*Math.sin(Rad(2*f)),L=orb_plan($,6),j=L[4];R=d-l/j,e=+(-3349+163*p)*Math.sin(Rad(f))+20981*Math.cos(Rad(f))+1311*Math.cos(Rad(2*f)),e/=1e7,t=-.003825*Math.cos(Rad(f)),n=+(.010122-988e-6*p)*Math.sin(Rad(S+P))+(-.038581+.002031*p-.00191*p*p)*Math.cos(Rad(S+P))+(.034964-.001038*p+868e-6*p*p)*Math.cos(Rad(2*S+P))+.005594*Math.sin(Rad(S+3*N))-.014808*Math.sin(Rad(D))-.005794*Math.sin(Rad(P))+.002347*Math.cos(Rad(P))+.009872*Math.sin(Rad(N))+.008803*Math.sin(Rad(2*N))-.004308*Math.sin(Rad(3*N)),r=+(458e-6*Math.sin(Rad(P))-642e-6*Math.cos(Rad(P))-517e-6*Math.cos(Rad(4*N)))*Math.sin(Rad(S))-(347e-6*Math.sin(Rad(P))+853e-6*Math.cos(Rad(P))+517e-6*Math.sin(Rad(4*P)))*Math.cos(Rad(S))+403e-6*(Math.cos(Rad(2*N))*Math.sin(Rad(2*S))+Math.sin(Rad(2*N))*Math.cos(Rad(2*S))),o=-25948+(5795*Math.cos(Rad(S))-1165*Math.sin(Rad(S))+1388*Math.cos(Rad(2*S)))*Math.sin(Rad(P))+4985*Math.cos(Rad(D))+(1351*Math.cos(Rad(S))+5702*Math.sin(Rad(S))+1388*Math.sin(Rad(2*S)))*Math.cos(Rad(P))-1230*Math.cos(Rad(S))+904*Math.cos(Rad(2*N))+3354*Math.cos(Rad(P))+894*(Math.cos(Rad(N))-Math.cos(Rad(3*N))),o/=1e6}if(7==s){var p=_/5+.1,w=237.47555+3034.9061*_,m=265.9165+1222.1139*_,S=243.51721+428.4677*_,h=2*w-6*m+3*S,F=83.76922+218.4901*_,f=2*F-S,D=F-w,P=F-m,N=F-S;d=+(-.589833+.001089*p)*Math.sin(Rad(f))+(-.056094+.004658*p)*Math.cos(Rad(f))-.024286*Math.sin(Rad(2*f));var l=.024039*Math.sin(Rad(f))-.025303*Math.cos(Rad(f))+.006206*Math.sin(Rad(2*f))-.005992*Math.cos(Rad(2*f)),L=orb_plan($,7),j=L[4];R=d-l/j,e=4389*Math.sin(Rad(f))+4262*Math.cos(Rad(f))+1129*Math.sin(Rad(2*f))+1089*Math.cos(Rad(2*f)),e/=1e7,t=-817*Math.sin(Rad(f))+8189*Math.cos(Rad(f))+781*Math.cos(Rad(2*f)),t/=1e6,n=-.009556*Math.sin(Rad(D))-.005178*Math.sin(Rad(P))+.002572*Math.sin(Rad(2*N))-.002972*Math.cos(Rad(2*N))*Math.sin(Rad(F))-.002833*Math.sin(Rad(2*N))*Math.cos(Rad(F)),r=336e-6*Math.cos(Rad(2*N))*Math.sin(Rad(F))+364e-6*Math.sin(Rad(2*N))*Math.cos(Rad(F)),o=-40596+4992*Math.cos(Rad(D))+2744*Math.cos(Rad(P))+2044*Math.cos(Rad(N))+1051*Math.cos(Rad(2*N)),o/=1e6}return[d,o,n,t,e,R,r]}function costell($){return cost="*",$>1.77&&$<3.38?cost="Ari":$>3.38&&$<6.02?cost="Tau":$>6.02&&$<8.02?cost="Gem":$>8.02&&$<9.35?cost="Cnc":$>9.35&&$<11.6?cost="Leo":$>11.6&&$<14.4?cost="Vir":$>14.4&&$<16?cost="Lib":$>16&&$<16.4?cost="Sco":$>16.4&&$<17.7?cost="Oph":$>17.7&&$<20.1?cost="Sgr":$>20.1&&$<21.9?cost="Cap":$>21.9&&$<23.5?cost="Aqr":$>23.5&&$<24?cost="Psc":$>0&&$<1.77&&(cost="Psc"),cost}function costell2($){return cost="*",$>1.77&&$<3.38?cost="Aries ":$>3.38&&$<6.02?cost="Taurus":$>6.02&&$<8.02?cost="Gemini":$>8.02&&$<9.35?cost="Cancer":$>9.35&&$<11.6?cost="Leo":$>11.6&&$<14.4?cost="Virgo":$>14.4&&$<16?cost="Libra":$>16&&$<16.4?cost="Scorpius":$>16.4&&$<17.7?cost="Ophiucus":$>17.7&&$<20.1?cost="Sagittarius":$>20.1&&$<21.9?cost="Capricornus":$>21.9&&$<23.5?cost="Aquarius":$>23.5&&$<24?cost="Pisces ":$>0&&$<1.77&&(cost="Pisces "),cost}function orb_plan($,s){var _=($-2415020)/36525,d=[];d[0]=178.179078+149474.07078*_+3011e-7*_*_,d[1]=342.767053+58519.21191*_+3097e-7*_*_,d[2]=99.69668+36000.76892*_+3025e-7*_*_,d[3]=293.737334+19141.69551*_+3107e-7*_*_,d[4]=238.049257+3036.301986*_+3347e-7*_*_-165e-8*_*_*_,d[5]=266.564377+1223.509884*_+3245e-7*_*_-58e-7*_*_*_,d[6]=244.19747+429.863546*_+316e-6*_*_-6e-7*_*_*_,d[7]=84.457994+219.885914*_+3205e-7*_*_-6e-7*_*_*_,d[8]=93.48+144.96*_;var o=[];o[0]=102.27938+149472.51529*_+7e-6*_*_,o[1]=212.60322+58517.80387*_+.001286*_*_,o[2]=178.47583+35999.04975*_-15e-5*_*_-33e-7*_*_*_,o[3]=319.51913+19139.85475*_+181e-6*_*_,o[4]=225.32829+3034.69202*_-722e-6*_*_,o[5]=175.46616+1221.55147*_-502e-6*_*_,o[6]=72.64878+428.37911*_+79e-6*_*_,o[7]=37.73063+218.46134*_-7e-5*_*_,o[8]=0;var n=[.3870986,.7233316,.999996,1.5236883,5.202561,9.554747,19.21814,30.10957,39.48168677],i=[.24085,.61521,1.00004,1.88089,11.86224,29.45771,84.01247,164.79558,248.09],t=[1918e-9,1721e-8,0,4539e-9,1994e-7,174e-6,7768e-8,7597e-8,4073e-9],e=[6.74,16.92,0,9.36,196.74,165.6,65.8,62.2,3.2],R=[];R[0]=.20561421+2046e-8*_-3e-8*_*_,R[1]=.00682069-4774e-8*_+91e-9*_*_,R[2]=.01675104-418e-7*_-126e-9*_*_,R[3]=.0933129+92064e-9*_-77e-9*_*_,R[4]=.04833475+16418e-8*_-4676e-10*_*_-17e-10*_*_*_,R[5]=.05589232-3455e-7*_-728e-9*_*_+74e-11*_*_*_,R[6]=.0463444-2658e-8*_+77e-9*_*_,R[7]=.00899704+633e-8*_-2e-9*_*_,R[8]=.24880766;var r=[];r[0]=7.002881+.0018608*_-183e-7*_*_,r[1]=3.393631+.0010058*_-1e-6*_*_,r[2]=0,r[3]=1.850333-675e-6*_+126e-7*_*_,r[4]=1.308736-.0056961*_+39e-7*_*_,r[5]=2.492519-.0039189*_-1549e-8*_*_+4e-8*_*_*_,r[6]=.772464+6253e-7*_+395e-7*_*_,r[7]=1.779242-.0095436*_-91e-7*_*_,r[8]=17.14175;var c=[];c[0]=28.753753+.3702806*_+1208e-7*_*_,c[1]=54.384186+.5081861*_-.0013864*_*_,c[2]=gradi_360(d[2]-o[2]+180),c[3]=285.431761+1.0697667*_+1313e-7*_*_+414e-8*_*_*_,c[4]=273.277558+.5994317*_+70405e-8*_*_+508e-8*_*_*_,c[5]=338.3078+1.0852207*_+97854e-8*_*_+992e-8*_*_*_,c[6]=98.071581+.985765*_-.0010745*_*_-61e-8*_*_*_,c[7]=276.045975+.3256394*_+14095e-8*_*_+4113e-9*_*_*_,c[8]=113.76329;var l=[];l[0]=47.145944+1.1852083*_+1739e-7*_*_,l[1]=75.779647+.89985*_+41e-5*_*_,l[2]=0,l[3]=48.786442+.7709917*_-14e-7*_*_-533e-8*_*_*_,l[4]=99.443414+1.01053*_+35222e-8*_*_-851e-8*_*_*_,l[5]=112.790414+.8731951*_-15218e-8*_*_-531e-8*_*_*_,l[6]=73.477111+.4986678*_+.0013117*_*_,l[7]=130.681389+1.098935*_+24987e-8*_*_-4718e-9*_*_*_,l[8]=110.30347;var u=gradi_360(d[s]),g=gradi_360(o[s]),v=n[s],f=i[s],p=r[s],w=gradi_360(c[s]+l[s]),m=l[s],S=R[s],T=e[s],h=t[s];return 8==s&&(g=gradi_360(u-c[8]-l[8])),[f,u,g,w,S,v,p,m,T,h]}function delta_T($){var s=0,_=0;return $<-500&&(_=-20+32*(s=($-1820)/100)*s),$>=-500&&$<=500&&(_=10583.6-1014.41*(s=$/100)+33.78311*s*s-5.952053*s*s*s-.1798452*s*s*s*s+.022174192*s*s*s*s*s+.0090316521*s*s*s*s*s*s),$>500&&$<=1600&&(_=1574.2-556.01*(s=($-1e3)/100)+71.23472*s*s+.319781*s*s*s-.8503463*s*s*s*s-.005050998*s*s*s*s*s+.0083572073*s*s*s*s*s*s),$>1600&&$<=1700&&(_=120-.9808*(s=$-1600)-.01532*s*s+s*s*s/7129),$>1700&&$<=1800&&(_=8.83+.1603*(s=$-1700)-.0059285*s*s+13336e-8*s*s*s-s*s*s*s/1174e3),$>1800&&$<=1860&&(_=13.72-.332447*(s=$-1800)+.0068612*s*s+.0041116*s*s*s-37436e-8*s*s*s*s+121272e-10*s*s*s*s*s-1699e-10*s*s*s*s*s*s+875e-12*s*s*s*s*s*s*s),$>1860&&$<=1900&&(_=7.62+.5737*(s=$-1860)-.251754*s*s+.01680668*s*s*s-4473624e-10*s*s*s*s+s*s*s*s*s/233174),$>1900&&$<=1920&&(_=-2.79+1.494119*(s=$-1900)-.0598939*s*s+.0061966*s*s*s-197e-6*s*s*s*s),$>1920&&$<=1941&&(_=21.2+.84493*(s=$-1920)-.0761*s*s+.0020936*s*s*s),$>1941&&$<=1961&&(_=29.07+.407*(s=$-1950)-s*s/233+s*s*s/2547),$>1961&&$<=1986&&(_=45.45+1.067*(s=$-1975)-s*s/260-s*s*s/718),$>1986&&$<=2005&&(_=63.86+.3345*(s=$-2e3)-.060374*s*s+.0017275*s*s*s+651814e-9*s*s*s*s+2373599e-11*s*s*s*s*s),$>2005&&$<=2050&&(_=62.92+.32217*(s=$-2e3)+.005589*s*s),$>2050&&$<=2150&&(_=-20+32*(($-1820)/100)*(($-1820)/100)-.5628*(2150-$)),$>2150&&(_=-20+32*(s=($-1820)/100)*s),_=1*_.toFixed(2)}function nutazione($){var s=($-2415020)/36525,_=279.6967+36000.7689*s+303e-6*s*s,d=270.4342+481267.8831*s-.001133*s*s,o=358.4758+35999.0498*s-15e-5*s*s,n=296.1046+477198.8491*s+.009192*s*s,i=259.1833-1934.142*s+.002078*s*s,t=-(17.2327+.01737*s)*Math.sin(Rad(i))-(1.2729+13e-5*s)*Math.sin(Rad(2*_))+.2088*Math.sin(Rad(2*i))-.2037*Math.sin(Rad(2*d))+(.1261-31e-5*s)*Math.sin(Rad(o))+.0675*Math.sin(Rad(n))-(.0497-12e-5*s)*Math.sin(Rad(2*_+o))-.0342*Math.sin(Rad(2*d-i))-.0261*Math.sin(Rad(2*d+n))+.0214*Math.sin(Rad(2*_-o))-.0149*Math.sin(Rad(2*_-2*d+n))+.0124*Math.sin(Rad(2*_-i))+.0114*Math.sin(Rad(2*d-n)),e=(9.21+91e-5*s)*Math.cos(Rad(i))+(.5522-29e-5*s)*Math.cos(Rad(2*_))-.0904*Math.cos(Rad(2*i))+.0884*Math.cos(Rad(2*d))+.0216*Math.cos(Rad(2*_+o))+.0183*Math.cos(Rad(2*d-i))+.0113*Math.cos(Rad(2*d+n))-.0093*Math.cos(Rad(2*_-o))-.0066*Math.cos(Rad(2*_-i));return[t,e]}function pos_app($,s,_){var d=($-2415020)/36525,o=23.452294-.0130125*d-164e-8*d*d+503e-9*d*d*d;o=Rad(o);var n=nutazione($),i=(Math.cos(o)+Math.sin(o)*Math.sin(Rad(15*s))*Math.tan(Rad(_)))*n[0]-Math.cos(Rad(15*s))*Math.tan(Rad(_))*n[1],t=Math.sin(o)*Math.cos(Rad(15*s))*n[0]+Math.sin(Rad(15*s))*n[1],e=pos_sole($)[2],R=-20.49*(Math.cos(Rad(15*s))*Math.cos(Rad(e))*Math.cos(o)+Math.sin(Rad(15*s))*Math.sin(Rad(e)))/Math.cos(Rad(_)),r=-20.49*(Math.cos(Rad(e))*Math.cos(o)*(Math.tan(o)*Math.cos(Rad(_))-Math.sin(Rad(15*s))*Math.sin(Rad(_)))+Math.cos(Rad(15*s))*Math.sin(Rad(e))*Math.sin(Rad(_)));return[s+(i+R)/15/3600,_+(t+r)/3600]}function pos_app_pa($,s,_,d,o,n,i){var t,e,R=pos_app($,s,_),r=cor_parall($,R[0],R[1],d,o,n,i);return[r[0],r[1]]}function t_luce($,s){var _=[.3870986,.7233316,1,1.5236883,5.202561,9.554747,19.21814,30.10957],d=$-2444238.5,o=360/365.2422*(d/[.24085,.61521,1.00004,1.88089,11.86224,29.45771,84.01247,164.79558][s])+[231.2973,355.73352,98.83354,126.30783,146.966365,165.322242,228.0708551,260.3578998][s],n=_[s]*_[s]+1-2*_[s]*Math.cos(Rad(Math.abs(o-(360/365.2422*(d/1.0004)+98.83354)))),n=Math.sqrt(n);return .0057756*n}function pos_luna($){var s=($-2415020)/36525,_=270.434164+481267.8831*s-.001133*s*s+19e-7*s*s*s,d=358.475833+35999.04975*s-15e-5*s*s-33e-7*s+s*s,o=296.104608+477198.8491*s+.009192*s*s+144e-7*s*s*s,n=350.737486+445267.1142*s-.001436*s*s+19e-7*s*s*s,i=11.250889+483202.0251*s-.003211*s*s-3e-7*s*s*s,t=259.183275-1934.142*s+.002078*s*s+22e-7*s*s*s,e=.003964*Math.sin(Rad(346.56+132.87*s-.0091731*s*s));_=_+233e-6*Math.sin(Rad(51.2+20.2*s))+e,d-=.001778*Math.sin(Rad(51.2+20.2*s)),o=o+817e-6*Math.sin(Rad(51.2+20.2*s))+e,n=n+.002011*Math.sin(Rad(51.2+20.2*s))+e,_+=.001964*Math.sin(Rad(t)),o+=.002541*Math.sin(Rad(t)),n+=.001964*Math.sin(Rad(t)),i-=.024691*Math.sin(Rad(t)),i-=.004328*Math.sin(Rad(t+275.05-2.3*s)),i+=e;var R=1-.002495*s-752e-8*s*s,r=_+6.28875*Math.sin(Rad(o))+1.274018*Math.sin(Rad(2*n-o))+.658309*Math.sin(Rad(2*n))+.213616*Math.sin(Rad(2*o))-.185596*Math.sin(Rad(d))*R-.114336*Math.sin(Rad(2*i))+.058793*Math.sin(Rad(2*n-2*o))+.057212*Math.sin(Rad(2*n-d-o))*R+.05332*Math.sin(Rad(2*n+o))+.045874*Math.sin(Rad(2*n-d))*R+.041024*Math.sin(Rad(o-d))*R-.034718*Math.sin(Rad(n))-.030465*Math.sin(Rad(d+o))*R+.015326*Math.sin(Rad(2*n-2*i))-.012528*Math.sin(Rad(2*i+o))-.01098*Math.sin(Rad(2*i-o))+.010674*Math.sin(Rad(4*n-o))+.010034*Math.sin(Rad(3*o))+.008548*Math.sin(Rad(4*n-2*o))-.00791*Math.sin(Rad(d-o+2*n))*R-.006783*Math.sin(Rad(2*n+d))*R+.005162*Math.sin(Rad(o-n))-.005*Math.sin(Rad(d+n))*R+.004049*Math.sin(Rad(o-d+2*n))*R+.003996*Math.sin(Rad(2*o+2*n))+.003862*Math.sin(Rad(4*n))+.003665*Math.sin(Rad(2*n-3*o))+.002695*Math.sin(Rad(2*o-d))*R+.002602*Math.sin(Rad(o-2*i-2*n))+.002396*Math.sin(Rad(2*n-d-2*o))*R-.002349*Math.sin(Rad(o+n))+.002249*Math.sin(Rad(2*n-2*d))*R*R-.002125*Math.sin(Rad(2*o+d))*R-.002079*Math.sin(Rad(2*d))*R*R+.002059*Math.sin(Rad(2*n-o-2*d))*R*R-.001773*Math.sin(Rad(o+2*n-2*i))-.001595*Math.sin(Rad(2*i+2*n))+.00122*Math.sin(Rad(4*n-d-o))*R-.00111*Math.sin(Rad(2*o+2*i))+892e-6*Math.sin(Rad(o-3*n))-811e-6*Math.sin(Rad(d+o+2*n))*R+761e-6*Math.sin(Rad(4*n-d-2*o))*R+717e-6*Math.sin(Rad(o-2*d))*R*R+704e-6*Math.sin(Rad(o-2*d-2*n))*R*R+693e-6*Math.sin(Rad(d-2*o+2*n))*R+598e-6*Math.sin(Rad(2*n-d-2*i))*R+55e-5*Math.sin(Rad(o+4*n))+538e-6*Math.sin(Rad(4*o))+521e-6*Math.sin(Rad(4*n-d))*R+486e-6*Math.sin(Rad(2*o-n)),c=5.128189*Math.sin(Rad(i))+.280606*Math.sin(Rad(o+i))+.277693*Math.sin(Rad(o-i))+.173238*Math.sin(Rad(2*n-i))+.055413*Math.sin(Rad(2*n+i-o))+.046272*Math.sin(Rad(2*n-i-o))+.032573*Math.sin(Rad(2*n+i))+.017198*Math.sin(Rad(2*o+i))+.009267*Math.sin(Rad(2*n+o-i))+.008823*Math.sin(Rad(2*o-i))+.008247*Math.sin(Rad(2*n-d-i))*R+.004323*Math.sin(Rad(2*n-i-2*o))+.0042*Math.sin(Rad(2*n+i+o))+.003372*Math.sin(Rad(i-d-2*n))*R+.002472*Math.sin(Rad(2*n+i-d-o))*R+.002222*Math.sin(Rad(2*n+i-d))*R+.002072*Math.sin(Rad(2*n-i-d-o))*R+.001877*Math.sin(Rad(i-d+o))*R+.001828*Math.sin(Rad(4*n-i-o))-.001803*Math.sin(Rad(i+d))*R-.00175*Math.sin(Rad(3*i))+.00157*Math.sin(Rad(o-d-i))*R-.001487*Math.sin(Rad(i+n))-.001481*Math.sin(Rad(i+d+o))*R+.001417*Math.sin(Rad(i-d-o))*R+.00135*Math.sin(Rad(i-d))*R+.00133*Math.sin(Rad(i-n))+.001106*Math.sin(Rad(i+3*o))+.00102*Math.sin(Rad(4*n-i))+833e-6*Math.sin(Rad(i+4*n-o))+781e-6*Math.sin(Rad(o-3*i))+67e-5*Math.sin(Rad(i+4*n-2*o))+606e-6*Math.sin(Rad(2*n-3*i))+597e-6*Math.sin(Rad(2*n+2*o-i))+492e-6*Math.sin(Rad(2*n+o-d-i))*R+45e-5*Math.sin(Rad(2*o-i-2*n))+439e-6*Math.sin(Rad(3*o-i))+423e-6*Math.sin(Rad(i+2*n+2*o))+422e-6*Math.sin(Rad(2*n-i-3*o))-367e-6*Math.sin(Rad(d+i+2*n-o))*R-353e-6*Math.sin(Rad(d+i+2*n))*R+331e-6*Math.sin(Rad(i+4*n))+317e-6*Math.sin(Rad(2*n+i-d+o))*R+306e-6*Math.sin(Rad(2*n-2*d-i))*R*R-283e-6*Math.sin(Rad(o+3*i)),l=4664e-7*Math.cos(Rad(t)),u=754e-7*Math.cos(Rad(t+275.05-2.3)),g=c*(1-l-u),v=.950724+.051818*Math.cos(Rad(o))+.009531*Math.cos(Rad(2*n-o))+.007843*Math.cos(Rad(2*n))+.002824*Math.cos(Rad(2*o))+857e-6*Math.cos(Rad(2*n+o))+533e-6*Math.cos(Rad(2*n-d))*R+401e-6*Math.cos(Rad(2*n-d-o))*R+32e-5*Math.cos(Rad(o-d))*R-271e-6*Math.cos(Rad(n))-264e-6*Math.cos(Rad(o+d))*R-198e-6*Math.cos(Rad(2*i-o))+173e-6*Math.cos(Rad(3*o))+167e-6*Math.cos(Rad(4*n-o))-111e-6*Math.cos(Rad(d))*R+103e-6*Math.cos(Rad(4*n-2*o))-84e-6*Math.cos(Rad(2*o-2*n))-83e-6*Math.cos(Rad(2*n+d))*R+79e-6*Math.cos(Rad(2*n+2*o))+72e-6*Math.cos(Rad(4*n))+64e-6*Math.cos(Rad(2*n-d+o))*R-63e-6*Math.cos(Rad(2*n+d-o))*R+41e-6*Math.cos(Rad(d+n))*R+35e-6*Math.cos(Rad(2*o-d))*R-33e-6*Math.cos(Rad(3*o-2*n))-3e-5*Math.cos(Rad(o+n))-29e-6*Math.cos(Rad(2*i-2*n))-29e-6*Math.cos(Rad(2*o+d))*R+26e-6*Math.cos(Rad(2*n-2*d))*R*R-23e-6*Math.cos(Rad(2*i-2*n+o))+19e-6*Math.cos(Rad(4*n-d-o))*R;r=gradi_360(r);var f=trasf_ecli_equa($,r,g),p=pos_sole($);p[2];var w=elong(f[0],f[1],p[0],p[1]),m=.5*(1-Math.cos(Rad(w))),S=6378.14/Math.sin(Rad(v)),T=Math.atan(3476.2/(S=S.toFixed(0)));return T=(T=3600*Rda(T)).toFixed(2),f[2]=r,f[3]=m,f[4]=w,f[5]=v,f[6]=T,f[7]=S,f}function elong($,s,_,d){$*=15,_*=15;var o=Math.sin(Rad(s))*Math.sin(Rad(d))+Math.cos(Rad($-_))*Math.cos(Rad(s))*Math.cos(Rad(d));return o=Math.acos(o),o=Rda(o),gradi_360($-_)>180&&(o=-o),o}function dist_ang($,s,_,d){$*=15,_*=15;var o=Math.sin(Rad(s))*Math.sin(Rad(d))+Math.cos(Rad($-_))*Math.cos(Rad(s))*Math.cos(Rad(d));return o=Math.acos(o),o=Rda(o)}function dist_cart($,s,_,d){var o=$-_,n=s-d;return Math.sqrt(o*o+n*n)}function eqsol($){var s,_=$,d=_/1e3,o=1721139.2855+365.2421376*_+.067919*d*d-.0027879*d*d*d,n=1721233.2486+365.2417284*_-.053018*d*d+.009332*d*d*d;return[o,n,1721325.6978+365.2425055*_-.126689*d*d+.0019401*d*d*d,1721414.392+365.2428898*_-.010965*d*d-.0084885*d*d*d]}function rifraz($){var s=1/Math.tan(Rad(90-$+7.31/(90-$+4.4))),_=s-.06*Math.sin(Rad(14.7*(s/60)+13)),d=$-_/60;return $>90&&(d=$-.566667),d}function Lnum($,s){var _=String($);for(a=0;a<s;a++)_.length<s&&(_="0"+_);return _}function Lstr($,s){var _=$;for(a=0;a<s;a++)_.length<s&&(_="&nbsp;"+_);return _}function corr_alt($){return 90-Rda(Math.asin(6378/(6378+$/1e3)))}function hams_dec($,s,_){var d=Math.abs($)+Math.abs(s/60)+Math.abs(_/3600);return($<0||s<0||_<0)&&(d=-d),d}function ST_SOLE($,s,_,d){var o=0,n=0,i=0,t=0,e=0,R=0,r=0,c=$=jdHO($),l=.25;for(a=0;a<5;a++)l=(o=pos_sole(c))[5]/3600/2,n=(r=ST_ASTRO_DATA(c,o[0],o[1],s,_,d,l))[2],c=$+n/24;for(a=0,e=r[0];a<5;a++)o=pos_sole(c),p_app=pos_app(c,o[0],o[1]),l=o[5]/3600/2,t=(r=ST_ASTRO_DATA(c,p_app[0],p_app[1],s,_,d,l))[3],c=$+t/24;for(a=0;a<5;a++)l=(o=pos_sole(c))[5]/3600/2,i=(r=ST_ASTRO_DATA(c,o[0],o[1],s,_,d,l))[4],c=$+i/24;return[e,R=r[1],n,t,i]}function ST_LUNA($,s,_,d){var o=0,n=0,i=0,t=0,e=0,R=0,r=0,c=$=jdHO($),l=.25;for(a=0;a<10;a++)l=(o=pos_luna(c))[6]/3600/2,p_app=pos_app_pa(c,o[0],o[1],o[5],_,s,d),n=(r=ST_ASTRO_DATA(c,p_app[0],p_app[1],s,_,d,l))[2],c=$+n/24;for(a=0,e=r[0];a<10;a++)l=(o=pos_luna(c))[6]/3600/2,p_app=pos_app_pa(c,o[0],o[1],o[5],_,s,d),t=(r=ST_ASTRO_DATA(c,p_app[0],p_app[1],s,_,d,l))[3],c=$+t/24;for(a=0;a<10;a++)l=(o=pos_luna(c))[6]/3600/2,p_app=pos_app_pa(c,o[0],o[1],o[5],_,s,d),i=(r=ST_ASTRO_DATA(c,p_app[0],p_app[1],s,_,d,l))[4],c=$+i/24;return[e,R=r[1],n,t,i]}function ST_ASTRO($,s,_,d,o,n){var i,t=-(.56667+corr_alt(o)+n),e=(Math.sin(Rad(t))-Math.sin(Rad(d))*Math.sin(Rad(s)))/(Math.cos(Rad(d))*Math.cos(Rad(s)));e=Math.acos(e),e=Rda(e),e/=15;var R=(Math.sin(Rad(s))-Math.sin(Rad(t))*Math.sin(Rad(d)))/(Math.cos(Rad(t))*Math.cos(Rad(d)));R=Math.acos(R);var r=R=Rda(R),c=360-R,l=24-e+$,u=$,g=e+$,v=ore_24(l-_/15),f=ore_24(u-_/15),p=ore_24(g-_/15),w=1*tras_tsg_tmg(v),m=1*tras_tsg_tmg(f),S=1*tras_tsg_tmg(p);return[r,c,w,m,S,v,f,p,e]}function ST_PIANETI($,s,_,d,o){var n=0,i=0,t=0,e=0,R=0,r=0,c=0,l=$=jdHO($),u=$;for(a=0;a<10;a++)n=pos_pianeti(l,s),i=(c=ST_ASTRO_DATA(l,n[0],n[1],_,d,o,0))[2],u=l=$+i/24,c[2]>c[3]&&(l-=1);for(a=0,R=c[0];a<10;a++)n=pos_pianeti(l,s),e=(c=ST_ASTRO_DATA(l,n[0],n[1],_,d,o,0))[3],l=$+e/24;for(a=0;a<10;a++)n=pos_pianeti(l,s),t=(c=ST_ASTRO_DATA(l,n[0],n[1],_,d,o,0))[4],l=$+t/24,c[4]<c[3]&&(l+=1);return[R,r=c[1],i,e,t]}function afase_luna($){var s=pos_luna($),_=pos_sole($),d=s[4],o=s[7]/149597870,n=_[4],i=o*o+n*n-2*o*n*Math.cos(Rad(elongazione=1*Math.abs(d)));i=Math.sqrt(i);var t=o,e=n,R=i,r=(e*e+R*R-t*t)/(2*R*e);r=Rda(r=Math.acos(r));var c=180-elongazione-r;return d<0&&(c=-c),c}function afase_pianeta($,s,_,d,o){var n=pos_sole($),i=n[4],t=elong(s,_,n[0],n[1]),e=o,R=i,r=d,c=(R*R+r*r-e*e)/(2*r*R);return 180-Math.abs(t)-(c=Rda(c=Math.acos(c)))}function name_phase($,s){var _=$+360,d="*";return _>360&&(_-=360),"ITA"==s&&(_>0&&_<10?d="Luna Nuova":_>10&&_<80?d="Luna Crescente":_>80&&_<100?d="Primo Quarto":_>100&&_<170?d="Gibbosa Crescente":_>170&&_<190?d="Luna Piena":_>190&&_<260?d="Gibbosa Calante":_>260&&_<280?d="Ultimo Quarto":_>280&&_<350?d="Luna Calante":_>350&&_<360&&(d="Luna Nuova")),"ENG"==s&&(_>0&&_<10?d="New Moon":_>10&&_<80?d="Waxing Crescent":_>80&&_<100?d="First Quarter":_>100&&_<170?d="Waxing Gibbous":_>170&&_<190?d="Full Moon":_>190&&_<260?d="Waning Gibbous":_>260&&_<280?d="Last Quarter":_>280&&_<350?d="Waning Crescent":_>350&&_<360&&(d="New Moon")),d}function moons_jup($){var s=$-2415020,_=134.63+.00111587*s,d=358.476+.9856003*s,o=225.328+.0830853*s+.33*Math.sin(Rad(_)),n=221.647+.9025179*s-.33*Math.sin(Rad(_)),i=1.916*Math.sin(Rad(d))+.02*Math.sin(Rad(2*d)),t=5.552*Math.sin(Rad(o))+.167*Math.sin(Rad(2*o)),e=n+i-t,R=1.00014-.01672*Math.cos(Rad(d))-14e-5*Math.cos(Rad(2*d)),r=5.20867-.25192*Math.cos(Rad(o))-.0061*Math.cos(Rad(2*o)),c=Math.sqrt(r*r+R*R-2*r*R*Math.cos(Rad(e))),l=Math.asin(R*Math.sin(Rad(e))/c);l=Rda(l);var u=238.05+.083091*s+.33*Math.sin(Rad(_))+t,g=3.07*Math.sin(Rad(u+44.5))-2.15*Math.sin(Rad(l))*Math.cos(Rad(u+24))-1.31*((r-c)/c)*Math.sin(Rad(u-99.4)),v=84.5506+203.405863*(s-c/173)+l-t,f=41.5015+101.2916323*(s-c/173)+l-t,p=109.977+50.2345169*(s-c/173)+l-t,w=176.3586+21.4879802*(s-c/173)+l-t,m=187.3+50.310674*(s-c/173),S=311.1+21.569229*(s-c/173),T=.472*Math.sin(Rad(2*(v-f))),h=1.073*Math.sin(Rad(2*(f-p))),D=.174*Math.sin(Rad(m)),L=.845*Math.sin(Rad(S)),j=5.9061-.0244*Math.cos(Rad(2*(v-f))),O=9.3972-.0889*Math.cos(Rad(2*(f-p))),F=14.9894-.0227*Math.cos(Rad(m)),P=26.3649-.1944*Math.cos(Rad(S));v=gradi_360(v+T),f=gradi_360(f+h),p=gradi_360(p+D),w=gradi_360(w+L),X1=j*Math.sin(Rad(v)),Y1=-j*Math.cos(Rad(v))*Math.sin(Rad(g)),X2=O*Math.sin(Rad(f)),Y2=-O*Math.cos(Rad(f))*Math.sin(Rad(g)),X3=F*Math.sin(Rad(p)),Y3=-F*Math.cos(Rad(p))*Math.sin(Rad(g)),X4=P*Math.sin(Rad(w)),Y4=-P*Math.cos(Rad(w))*Math.sin(Rad(g));var N=290.28+870.1869088*(s-c/173)+l-t;return N=gradi_360(N),[X1,Y1,v,X2,Y2,f,X3,Y3,p,X4,Y4,w,N,g]}function transit_grs($,s){for(var _=0,d=100;d>.01;)d=Math.abs((_=moons_jup($))[12]-s),$+=d/870.6167;return $}function transit_moonsjp($,s){var _=0,d=100,o=999,n=999,i=999,t=[0,5.9061,9.3972,14.9894,26.3649],e=[0,1.769138,3.551181,7.154553,16.689018],R=360-Rda(Math.asin(1/t[s])),r=360/e[s];for(1==s&&(R1=0,R2=1,R3=2),2==s&&(R1=3,R2=4,R3=5),3==s&&(R1=6,R2=7,R3=8),4==s&&(R1=9,R2=10,R3=11);Math.abs(d)>6e-4;)x=(_=moons_jup($))[R1],y=_[R2],$+=d=(R-(A=_[R3]))/r;var c=.93513,l=c*c,u=y*y;return Math.abs(y)<c&&(delta_t1=((angolo_d=360-Rda(Math.atan((delta_t1=Math.sqrt((l-u)/l))/t[s])))-R)/r,$+=delta_t1),Math.abs(y)<c&&(A=(_=moons_jup($))[R3],o=$,i=2*(n=$+(360-A)/r)-$),[o,n,i]}function opp_cong($,s){var _=100,d=[.24085,.61521,1.00004,1.88089,11.86224,29.45771,84.01247,164.79558,250.9],o=Math.abs(d[2]*d[s]/(d[2]-d[s]));o*=365.25636;var n=pos_pianeti($,s),i=gradi_360(n[7]+180),t=gradi_360(n[9]),e=Math.abs(t-i),R=360-Math.abs(t-i);for(t>i&&d[s]>d[2]?_=e/360*o:t<i&&d[s]>d[2]&&(_=R/360*o),t>i&&d[s]<d[2]?_=R/360*o:t<i&&d[s]<d[2]&&(_=e/360*o),$+=_;Math.abs(_)>1e-5;)n=pos_pianeti($,s),i=gradi_360(n[7]+180),t=gradi_360(n[9]),d[s]>d[2]&&(_=(t-i)/360*o),d[s]<d[2]&&(_=(i-t)/360*o),$+=_;return[$,i,t,o]}function double_stars($,s,_,d,o,n,i,t){var e=360/s*($-_);e=gradi_360(e);var R=eq_keplero(e,d),r=Rda(R[1]),c=o*(1-d*Math.cos(R[0])),l=Math.sin(Rad(r+t))*Math.cos(Rad(n)),u=Math.cos(Rad(r+t)),g=quadrante(l,u),v=gradi_360(g+i),f=c*Math.cos(Rad(r+t))/Math.cos(Rad(g));return[v,f]}function elliptic_orbit($,s,_,d,o,n,i,t,e,R,r){var c=($-s)*i;c=gradi_360(c);var l=eq_keplero(c,n),u=t*(1-n*Math.cos(l[0])),g=Rda(l[1])+_;calcola_jddata(1,1,r,0,0,0);var v=obli_ecli($),f=u*(Math.cos(Rad(g))*Math.cos(Rad(d))-Math.sin(Rad(g))*Math.sin(Rad(d))*Math.cos(Rad(o))),p=Math.cos(Rad(g))*Math.sin(Rad(d)),w=Math.sin(Rad(g))*Math.cos(Rad(d))*Math.cos(Rad(o)),m=Math.sin(Rad(g))*Math.sin(Rad(o)),S=u*(p*Math.cos(Rad(v))+w*Math.cos(Rad(v))-m*Math.sin(Rad(v))),T=u*(p*Math.sin(Rad(v))+w*Math.sin(Rad(v))+m*Math.cos(Rad(v))),h=Sun_XYZ($,r),D=h[0],L=h[1],j=h[2],O=D+f,F=L+S,P=j+T,N=quadrante(F,O)/15,q=Math.sqrt(O*O+F*F+P*P),I=Rda(Math.asin(P/q)),E=afase_pianeta($,N,I,u,q),z=pos_sole($),C=elong(N,I,z[0],z[1]),J=magnitude_ast(e,q,u,E,R);return[N,I,C,q,u,J,E,f,S,T]}function magnitude_ast($,s,_,d,o){var n,i=-.4*$,t=(1-o)*Math.pow(10,i),e=o*Math.pow(10,i),R=Math.pow(Math.tan(Rad(d/2)),.63),r=Math.pow(Math.tan(Rad(d/2)),1.22);return -2.5*Math.log(t*Math.exp(-3.33*R)+e*Math.exp(-1.87*r))*.4342+5*Math.log(_*s)*.4342-2.5*Math.log(Math.cos(Rad(d)))*.4342}function Sun_XYZ($,s){var _=($-2415020)/36525,d=279.69668+36000.76892*_+3025e-7*_*_,o=358.47583+35999.04975*_-15e-5*_*_-33e-7*_*_*_,n=.01675104-418e-7*_-126e-9*_*_,i=1.0000001124;d=gradi_360(d),o=gradi_360(o);var t=eq_keplero(o,n),e=Rda(t[1]),R=gradi_360(d+e-o),r=i*(1-n*Math.cos(t[0])),c=153.23+22518.7541*_,l=216.57+45037.5082*_,u=312.69+32964.3577*_,g=350.74+445267.1142*_-.00144*_*_,v=231.19+20.2*_,f=353.4+65928.7155*_;c=Rad(c),l=Rad(l),u=Rad(u),g=Rad(g),v=Rad(v);var p=543e-8*Math.sin(c)+1575e-8*Math.sin(l)+1627e-8*Math.sin(u)+3076e-8*Math.cos(g)+927e-8*Math.sin(f=Rad(f));R+=.00134*Math.cos(c)+.00154*Math.cos(l)+.002*Math.cos(u)+.00179*Math.sin(g)+.00178*Math.sin(v),r+=p;var w=obli_ecli($),m=r*Math.cos(Rad(R)),S=r*Math.sin(Rad(R))*Math.cos(Rad(w)),T=r*Math.sin(Rad(R))*Math.sin(Rad(w));jd_data($)[2];var h,D=calcola_jddata(1,1,s,0,0,0),L=precess($,D,10,10),j=L[2],O=L[3],F=L[4],P=Math.cos(Rad(j))*Math.cos(Rad(O))*Math.cos(Rad(F))-Math.sin(Rad(j))*Math.sin(Rad(O)),N=Math.sin(Rad(j))*Math.cos(Rad(O))+Math.cos(Rad(j))*Math.sin(Rad(O))*Math.cos(Rad(F)),q=Math.cos(Rad(j))*Math.sin(Rad(F)),I=-Math.cos(Rad(j))*Math.sin(Rad(O))-Math.sin(Rad(j))*Math.cos(Rad(O))*Math.cos(Rad(F)),E=Math.cos(Rad(j))*Math.cos(Rad(O))-Math.sin(Rad(j))*Math.sin(Rad(O))*Math.cos(Rad(F)),z=-Math.sin(Rad(j))*Math.sin(Rad(F)),C=-Math.cos(Rad(O))*Math.sin(Rad(F)),J=-Math.sin(Rad(O))*Math.sin(Rad(F)),G=Math.cos(Rad(F)),H=P*m+I*S+C*T;return[H,N*m+E*S+J*T,q*m+z*S+G*T,m,S,T,r]}</script>
    <title> </title>
    
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Gabriela&display=swap" rel="stylesheet">

	<style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        svg {
            width: 100%;
            height: 100%;
			max-width: 1000px;
			max-height: 1000px;
        }
		
		body {
		  font-family: "Gabriela", serif;
		  font-weight: 400;
		  font-style: normal;
		}
		
		.holiday-date {
			stroke: #000000;
			stroke-width: 1px;
			stroke-linecap: butt;
			stroke-linejoin: miter;
		}		
    </style>
</head>
<body>
    <svg id="wheelOfYearSvg"></svg>
    <script>
	var date_eqsol = eqsol(new Date().getFullYear()); // calculates the julian day for the dates.

	// Retrieves the results from the Array: date_eqsol[0,..3]
    var njd1=date_eqsol[0];    //  March Equinox. 
    var njd2=date_eqsol[1];    //  June Solstice. 
    var njd3=date_eqsol[2];    //  September Equinox.
    var njd4=date_eqsol[3];    //  December Solstice.

    // Calendar dates

    // March Equinox
	var data1=jd_data(njd1);                                      // calendar date1.
    var dataf1=sc_day_hm(data1[0])+" : "+data1[1]+" : "+data1[2]; // formatting of the date.

	// June Solstice
    var data2=jd_data(njd2);                                      // calendar date2. 
    var dataf2=sc_day_hm(data2[0])+" : "+data2[1]+" : "+data2[2]; // formatting of the date.

	// September Equinox
    var data3=jd_data(njd3);                                      // calendar date3. 
    var dataf3=sc_day_hm(data3[0])+" : "+data3[1]+" : "+data3[2]; // formatting of the date.

    // December Solstice
	var data4=jd_data(njd4);                                      // calendar date4.
    var dataf4=sc_day_hm(data4[0])+" : "+data4[1]+" : "+data4[2]; // formatting of the date

	const svg = document.getElementById('wheelOfYearSvg');
	const width = svg.clientWidth;
	const height = svg.clientHeight;
	const centerX = width / 2;
	const centerY = height / 2;
	const radius = Math.min(width, height) / 2 - 5;
	
	const monthNames = ["", "", "", "", "", "", "", "", "", "", "", ""];
	//const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
	
	const holidays = [
		{ name: "", date: new Date(Date.UTC(new Date().getFullYear(), 11, parseInt(data4[0]))) },
		{ name: "", date: new Date(Date.UTC(new Date().getFullYear(), 1, 1)) },
		{ name: "", date: new Date(Date.UTC(new Date().getFullYear(), 2, parseInt(data1[0]))) },
		{ name: "", date: new Date(Date.UTC(new Date().getFullYear(), 4, 1)) },
		{ name: "", date: new Date(Date.UTC(new Date().getFullYear(), 5, parseInt(data2[0]))) },
		{ name: "", date: new Date(Date.UTC(new Date().getFullYear(), 7, 1)) },
		{ name: "", date: new Date(Date.UTC(new Date().getFullYear(), 8, parseInt(data3[0]))) },
		{ name: "", date: new Date(Date.UTC(new Date().getFullYear(), 9, 31)) }
	];	

	const colors = [
		'#0779b2',
		'#149ec3',
		'#de94af',
		'#06af8d',
		'#533583',
		'#06965d',
		'#099622',
		'#067071',
		'#dfab07',
		'#de8c0e',
		'#db6b3a',
		'#083c7a',
	];

	function getDaysInYear(year) {
		return ((year % 4 === 0 && year % 100 > 0) || year % 400 == 0) ? 366 : 365;
	}

	const daysInYear = getDaysInYear(new Date().getFullYear());
	const startOfYear = new Date(Date.UTC(new Date().getFullYear(), 0, 1));
		
	
	function getInigialAngle() {
		const dayOfYear = Math.floor((holidays[0].date - startOfYear) / (24 * 60 * 60 * 1000));
		return (dayOfYear - daysInYear / 4) * (2 * Math.PI / daysInYear);
	}
	
	const initialAngle = - getInigialAngle() - Math.PI / 2;

	function createSvgElement(tag, attributes) {
		const elem = document.createElementNS("http://www.w3.org/2000/svg", tag);
		for (let attr in attributes) {
			elem.setAttribute(attr, attributes[attr]);
		}
		return elem;
	}

	function describeArc(x, y, radius, spread, startAngle, endAngle){
		var innerStart = polarToCartesian(x, y, radius, endAngle);
		var innerEnd = polarToCartesian(x, y, radius, startAngle);
		var outerStart = polarToCartesian(x, y, radius + spread, endAngle);
		var outerEnd = polarToCartesian(x, y, radius + spread, startAngle);
		var largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";

		var d = [
			"M", outerStart.x, outerStart.y,
			"A", radius + spread, radius + spread, 0, largeArcFlag, 0, outerEnd.x, outerEnd.y,
			"L", innerEnd.x, innerEnd.y, 
			"A", radius, radius, 0, largeArcFlag, 1, innerStart.x, innerStart.y, 
			"L", outerStart.x, outerStart.y, "Z"
		].join(" ");

		return d;
	}

	function polarToCartesian(centerX, centerY, radius, angleInRadians) {
	  return {
		x: centerX + (radius * Math.cos(angleInRadians)),
		y: centerY + (radius * Math.sin(angleInRadians))
	  };
	}
	
	function datediff(first, second) {        
		return Math.round((second - first) / (1000 * 60 * 60 * 24));
	}
	
	///
	/// Draw Border
	///
	function drawCircle() {
		const circle = createSvgElement('circle', {
			cx: centerX,
			cy: centerY,
			r: radius,
			stroke: 'black',
			'stroke-width': 2,
			fill: 'none'
		});
		svg.appendChild(circle);
	}
	
	///
	/// Draw Background for months
	///
	function drawMonthsArc() {
		let dayCounter = 0;
		for (let m = 0; m < 12; m++) {
			var month = new Date(new Date().getFullYear(), m+1, 0);

			// <path id="lineAC" d="M 100 350 q 150 -300 300 0" stroke="blue" stroke-width="4" fill="none"/>
			const angle1 = (dayCounter - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
			dayCounter += month.getDate();
			const angle2 = (dayCounter - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
			
			
			const arc = createSvgElement('path', {
				stroke: 'none',
				"stroke-width": "1",
				fill: colors[m] + '99',
				d: describeArc(centerX, centerY, (radius * 0.80), radius * 0.1, angle1, angle2)
			});
			svg.appendChild(arc);		
		}
	}

	///
	/// Draw monthsnames
	///
	function drawMonths() {
		for (let i = 0; i < 12; i++) {
			const angle = (i - 2.5) * (2 * Math.PI / 12) + initialAngle;
			const x = centerX + Math.cos(angle) * (radius * 0.85);
			const y = centerY + Math.sin(angle) * (radius * 0.85);
			
			let rotation = (i+1) * (360 / 12) - 4;
			if (i > 2 && i < 8) rotation += 360 / 2;
			
			const text = createSvgElement('text', {
				x: 0,
				y: 0,
				'text-anchor': 'middle',
				'dominant-baseline': 'middle',
				'font-size': '0.8rem',
				fill: 'black',
				transform: "translate("+x+","+y+") rotate("+rotation+")"
			});
			text.textContent = monthNames[i];
			svg.appendChild(text);
		}
	}

	///
	/// Draw dots for each day
	///
	function drawDays() {
		let dayCounter = 0;
		for (let m = 0; m < 12; m++) {
			var d = new Date(new Date().getFullYear(), m + 1, 0);
			for (let i = 0; i < d.getDate(); i++) {
				const angle = (dayCounter - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
				const x = centerX + Math.cos(angle) * (radius * 0.8 - 0.5);
				const y = centerY + Math.sin(angle) * (radius * 0.8 - 0.5);
				const dayCircle = createSvgElement('circle', {
					cx: x,
					cy: y,
					r: 1,
					fill: 'black'
				});
				svg.appendChild(dayCircle);
				
				dayCounter++;
			}
		}
	}

	///
	/// Draw dots for each day
	///
	function drawHolidays() {
		for (let i in holidays) {
			let holiday = holidays[i];		
			
			const dayOfYear = Math.floor((holiday.date - startOfYear) / (24 * 60 * 60 * 1000));
			const angle = (dayOfYear - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
			
			let x = centerX + Math.cos(angle) * (radius * 0.95);
			let y = centerY + Math.sin(angle) * (radius * 0.95);
			
			let rotation = (i) * (360 / 8);
			// readability correction
			if (i > 2 && i < 6) rotation += 360 / 2;
			// correction because months not aligned properly
			if (i % 2 == 1) rotation -= 4;
			
			// Holiday Name
			const text = createSvgElement('text', {
				x: 0,
				y: 0,
				'text-anchor': 'middle',
				'dominant-baseline': 'middle',
				'font-size': 14,
				fill: 'black',
				transform: "translate("+x+","+y+") rotate("+rotation+")"
			});
			text.textContent = holiday.name;
			svg.appendChild(text);
			
			// Holiday Date
			x = centerX + Math.cos(angle) * (radius * 0.82);
			y = centerY + Math.sin(angle) * (radius * 0.82);			
			const date = createSvgElement('text', {
				x: 0,
				y: 0,
				'text-anchor': 'middle',
				'dominant-baseline': 'middle',
				'font-size': 10,
				fill: 'red',
				transform: "translate("+x+","+y+") rotate("+rotation+")",
				'class': 'holiday-date'
			});
			date.textContent = holiday.date.getDate();
			svg.appendChild(date);
			
			x = centerX + Math.cos(angle) * (radius * 0.8);
			y = centerY + Math.sin(angle) * (radius * 0.8);
			const holidayCircle = createSvgElement('circle', {
				cx: x,
				cy: y,
				r: 3,
				fill: 'red'				
			});
			svg.appendChild(holidayCircle);
			
			// Holiday Arrow
			const line = createSvgElement('line', {
				x1: centerX,
				y1: centerY,
				x2: x,
				y2: y,
				stroke: 'red',
				'stroke-width': 1
			});
			svg.appendChild(line);
		}
	}
	
	///
	/// Draw hristmas Star
	///
	function drawStar() {
		for (let l = 0; l < 2; l++) {
			for (let i = 0; i < 8; i++) {
				
				let holiday = holidays[i];
				let holidayBefore = i > 0 ? holidays[i-1] : holidays[7];
				let holidayAfter  = i < 7 ? holidays[i+1] : holidays[0];
				
				let dayOfYear = Math.floor((holiday.date - startOfYear) / (24 * 60 * 60 * 1000));
				let dayOfYearBefore = Math.floor((holidayBefore.date - startOfYear) / (24 * 60 * 60 * 1000));
				let dayOfYearAfter = Math.floor((holidayAfter.date - startOfYear) / (24 * 60 * 60 * 1000));

				let angle = (dayOfYear - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
				
				let compensation  = 0;
				if (Math.abs(dayOfYear - dayOfYearBefore) > 150) compensation = daysInYear; // in case if dates in different years
				let angleBefore = ((compensation + dayOfYear + dayOfYearBefore) / 2 - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
				
				compensation  = 0;
				if (Math.abs(dayOfYear - dayOfYearAfter) > 150) compensation = daysInYear; // in case if dates in different years
				let angleAfter = ((compensation + dayOfYear + dayOfYearAfter) / 2 - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
				
				let angleNextHoliday = (dayOfYearAfter - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
				
				let points = [];			
				
				if (l == 0) {
					// Background layer
				
					// peak
					points.push(centerX + Math.cos(angleAfter) * (radius * 0.45));
					points.push(centerY + Math.sin(angleAfter) * (radius * 0.45));

					// left
					points.push(centerX + Math.cos(angle) * (radius * 0.25));
					points.push(centerY + Math.sin(angle) * (radius * 0.25));
					
					// center
					points.push(centerX);
					points.push(centerY);
					
					// right
					points.push(centerX + Math.cos(angleNextHoliday) * (radius * 0.25));
					points.push(centerY + Math.sin(angleNextHoliday) * (radius * 0.25));
					
					// <polygon points="100,10 150,190 50,190" style="fill:lime;stroke:purple;stroke-width:3" />
					const polygonBack = createSvgElement('polygon', {
						points: points.join(","),
						stroke: 'red',
						'stroke-width': 1,
						style: "fill:#ff0000a8;stroke:black;stroke-width:1"
					});
					svg.appendChild(polygonBack);
				} else {
					// Front layer
				
					// peak
					points.push(centerX + Math.cos(angle) * (radius * 0.8));
					points.push(centerY + Math.sin(angle) * (radius * 0.8));
					
					// left
					points.push(centerX + Math.cos(angleBefore) * (radius * 0.25));
					points.push(centerY + Math.sin(angleBefore) * (radius * 0.25));
					
					// center
					points.push(centerX);
					points.push(centerY);
					
					// right
					points.push(centerX + Math.cos(angleAfter) * (radius * 0.25));
					points.push(centerY + Math.sin(angleAfter) * (radius * 0.25));
					
					// <polygon points="100,10 150,190 50,190" style="fill:lime;stroke:purple;stroke-width:3" />
					const polygon = createSvgElement('polygon', {
						points: points.join(","),
						stroke: 'red',
						'stroke-width': 1,
						style: "fill:red;stroke:black;stroke-width:1",
						'z-index': 1
					});
					svg.appendChild(polygon);
				}
			}
		}
	}
	
	///
	/// Draw Current Day
	///
	function drawToday() {		
		const today = new Date();
		const dayOfYear = Math.floor((today - startOfYear) / (24 * 60 * 60 * 1000));
		const angle = (dayOfYear - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
		
		const line = createSvgElement('line', {
			x1: centerX + Math.cos(angle) * (radius * 0.66),
			y1: centerY + Math.sin(angle) * (radius * 0.66),
			x2: centerX + Math.cos(angle) * (radius * 0.92),
			y2: centerY + Math.sin(angle) * (radius * 0.92),
			stroke: '#FF000055',
			'stroke-width': 2,
			//stroke: "black"
		});
		svg.appendChild(line);
		
		for (let i = -4; i <= 3; i++) {
			let x = centerX + Math.cos(angle) * (radius * 0.8 + i * radius / 30);
			let y = centerY + Math.sin(angle) * (radius * 0.8 + i * radius / 30);
			const todayCircle = createSvgElement('circle', {
				cx: x,
				cy: y,
				r: Math.max(0.5, 3 - Math.abs(i)),
				fill: '#FF000099',
				stroke: "black",
				'stroke-width': 0.5
			});
			svg.appendChild(todayCircle);		
		}		
	}
	
	function zoom() {		
		const today = new Date();
		const dayOfYear = Math.floor((today - startOfYear) / (24 * 60 * 60 * 1000));
		const angle = (dayOfYear - daysInYear / 4) * (2 * Math.PI / daysInYear) + initialAngle;
		let x = centerX + Math.cos(angle) * (radius);
		let y = centerY + Math.sin(angle) * (radius);
		
		let x1 = x - radius / 4;
		let x2 = x + radius / 4;
		let y1 = y - radius / 4;
		let y2 = y + radius / 4;
		
		svg.setAttribute("viewBox", x1 + " " + y1 + " " + x2 + " " + y2);
		// https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/transform
	}

	drawHolidays();
	drawMonthsArc();		
	drawStar();
	drawDays();	
	drawToday();
	drawMonths();
	drawCircle();
	
	//zoom();
	
	</script>
</body>
</html>
